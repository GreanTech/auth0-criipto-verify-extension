module.exports=function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=81)}([function(e,t){e.exports=require("auth0-extension-tools@1.2.1")},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t,r){var n=r(44)("wks"),o=r(49),i=r(1).Symbol,u="function"==typeof i;(e.exports=function(e){return n[e]||(n[e]=u&&i[e]||(u?i:o)("Symbol."+e))}).store=n},function(e,t){e.exports=require("express@4.14.0")},function(e,t){var r=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=r)},function(e,t,r){var n=r(12);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t,r){"use strict";var n=r(0).config(),o=r(7),i={CRIIPTO_VERIFY_CLIENT_ID:"aMnRpmOmyfTFzTuN1iWUmAIFgE0r16Hd",CRIIPTO_VERIFY_AUTH0_DOMAIN:"grean.auth0.com",CRIIPTO_VERIFY_DOMAIN:"api.grean.id"},u=function(e){if("AUTH0_ISSUER_DOMAIN"===e)return n("AUTH0_ISSUER_DOMAIN")||n("AUTH0_DOMAIN");var t=n(e);return t||(t=i[e],o.info("Lookup in default values (key -> val)",e,t)),t};u.getValue=function(e){return n(e)},u.setValue=function(e,t){return n.setValue(e,t)},u.setProvider=function(e){return n.setProvider(e)},e.exports=u},function(e,t,r){"use strict";var n=r(152);n.emitErrs=!0;var o=new n.Logger({transports:[new n.transports.Console({timestamp:!0,level:"debug",handleExceptions:!0,json:!1,colorize:!0})],exitOnError:!1});e.exports=o,e.exports.stream={write:function(e){o.info(e.replace(/\n$/,""))}}},function(e,t,r){e.exports=!r(25)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,r){var n=r(1),o=r(4),i=r(20),u=r(10),s=function(e,t,r){var a,c,f,l=e&s.F,d=e&s.G,p=e&s.S,h=e&s.P,v=e&s.B,m=e&s.W,g=d?o:o[t]||(o[t]={}),y=g.prototype,_=d?n:p?n[t]:(n[t]||{}).prototype;d&&(r=t);for(a in r)(c=!l&&_&&void 0!==_[a])&&a in g||(f=c?_[a]:r[a],g[a]=d&&"function"!=typeof _[a]?r[a]:v&&c?i(f,n):m&&_[a]==f?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(f):h&&"function"==typeof f?i(Function.call,f):f,h&&((g.virtual||(g.virtual={}))[a]=f,e&s.R&&y&&!y[a]&&u(y,a,f)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,r){var n=r(14),o=r(43);e.exports=r(8)?function(e,t,r){return n.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.USER_ACCESS_LEVEL=1,t.ADMIN_ACCESS_LEVEL=2,t.USER_ROLE_NAME="Delegated Admin - User",t.ADMIN_ROLE_NAME="Delegated Admin - Administrator",t.USER_PERMISSION="manage:users",t.ADMIN_PERMISSION="manage:config",t.VALID_SCRIPTS=["access","filter","create","memberships","settings"]},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports={}},function(e,t,r){var n=r(5),o=r(96),i=r(116),u=Object.defineProperty;t.f=r(8)?Object.defineProperty:function(e,t,r){if(n(e),t=i(t,!0),n(r),o)try{return u(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t){e.exports=require("bluebird@3.4.6")},function(e,t){e.exports=require("lodash@3.10.1")},function(e,t,r){const n=r(65),o=r(31),i=r(58),u=r(64);e.exports.createServer=n.createServer,e.exports.urlHelpers=o,e.exports.middlewares=i,e.exports.routes=u},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t,r){var n=r(18);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.requireScope=t.verifyUserAccess=void 0;var o=r(69),i=n(o),u=r(68),s=n(u);t.verifyUserAccess=i.default,t.requireScope=s.default},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){var n=r(12),o=r(1).document,i=n(o)&&n(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){"use strict";function n(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=o(t),this.reject=o(r)}var o=r(18);e.exports.f=function(e){return new n(e)}},function(e,t,r){var n=r(14).f,o=r(21),i=r(2)("toStringTag");e.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},function(e,t,r){var n=r(44)("keys"),o=r(49);e.exports=function(e){return n[e]||(n[e]=o(e))}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(37),o=r(23);e.exports=function(e){return n(o(e))}},function(e,t,r){function n(e){if(!e.container)return null;const t=e.container.replace(a,"\\$&"),r=e.jtn?e.jtn.replace(a,"\\$&"):"";if(e.url_format===s)return new RegExp("^/api/run/"+t+"/(?:"+r+"/?)?");if(e.url_format===u)return new RegExp("^/"+t+"/(?:"+r+"/?)?");if(e.url_format===i)return new RegExp("^/(?:"+r+"/?)?");throw new Error("Unsupported webtask URL format.")}const o=r(53),i=3,u=2,s=1,a=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,c=function(e,t){var r=o.parse(e).pathname||"";return r=r.replace(t,"").replace(/^\/|\/$/g,""),r.startsWith("/")||(r="/"+r),r.endsWith("/")||(r+="/"),r};e.exports.getBasePath=function(e){return c(e.originalUrl||"",e.path)},e.exports.getBaseUrl=function(e,t){var r=t;const n=o.parse(e.originalUrl||"").pathname||"";return o.format({protocol:r||"https",host:e.headers.host,pathname:n.replace(e.path,"").replace(/\/$/g,"")})},e.exports.getWebtaskUrl=function(e){const t=n(e.x_wt),r=e.url,i=e.url.replace(t,"/"),u=o.parse(i||"").pathname,s=o.parse(r||"").pathname||"";var a=o.format({protocol:"https",host:e.headers.host,pathname:s.replace(u,"").replace(/\/$/g,"")});return e.x_wt&&(0===a.indexOf("https://sandbox.it.auth0.com")?a=a.replace("https://sandbox.it.auth0.com/api/run/"+e.x_wt.container+"/","https://"+e.x_wt.container+".us.webtask.io/"):0===a.indexOf("https://sandbox-eu.it.auth0.com")?a=a.replace("https://sandbox-eu.it.auth0.com/api/run/"+e.x_wt.container+"/","https://"+e.x_wt.container+".eu.webtask.io/"):0===a.indexOf("https://sandbox-au.it.auth0.com")&&(a=a.replace("https://sandbox-au.it.auth0.com/api/run/"+e.x_wt.container+"/","https://"+e.x_wt.container+".au.webtask.io/"))),a}},function(e,t,r){"use strict";var n=r(133);e.exports=function(e,t,r){return function(o,i,u){var s=n(u);return!0===e||"function"==typeof e&&e(o,i,s)?t(o,i,s):r?r(o,i,s):s()}}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(82),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=o.default||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}},function(e,t,r){var n=r(19),o=r(2)("toStringTag"),i="Arguments"==n(function(){return arguments}()),u=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=u(t=Object(e),o))?r:i?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,r){var n=r(1).document;e.exports=n&&n.documentElement},function(e,t,r){var n=r(19);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t,r){"use strict";var n=r(39),o=r(9),i=r(112),u=r(10),s=r(21),a=r(13),c=r(100),f=r(27),l=r(108),d=r(2)("iterator"),p=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,r,v,m,g,y){c(r,t,v);var _,w,x,b=function(e){if(!p&&e in O)return O[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},E=t+" Iterator",A="values"==m,S=!1,O=e.prototype,T=O[d]||O["@@iterator"]||m&&O[m],U=T||b(m),I=m?A?b("entries"):U:void 0,k="Array"==t?O.entries||T:T;if(k&&(x=l(k.call(new e)))!==Object.prototype&&x.next&&(f(x,E,!0),n||s(x,d)||u(x,d,h)),A&&T&&"values"!==T.name&&(S=!0,U=function(){return T.call(this)}),n&&!y||!p&&!S&&O[d]||u(O,d,U),a[t]=U,a[E]=h,m)if(_={values:A?U:b("values"),keys:g?U:b("keys"),entries:I},y)for(w in _)w in O||i(O,w,_[w]);else o(o.P+o.F*(p||S),t,_);return _}},function(e,t){e.exports=!0},function(e,t,r){var n=r(109),o=r(35);e.exports=Object.keys||function(e){return n(e,o)}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,r){var n=r(5),o=r(12),i=r(26);e.exports=function(e,t){if(n(e),o(t)&&t.constructor===e)return t;var r=i.f(e);return(0,r.resolve)(t),r.promise}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,r){var n=r(1),o=n["__core-js_shared__"]||(n["__core-js_shared__"]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t,r){var n=r(5),o=r(18),i=r(2)("species");e.exports=function(e,t){var r,u=n(e).constructor;return void 0===u||void 0==(r=n(u)[i])?t:o(r)}},function(e,t,r){var n,o,i,u=r(20),s=r(97),a=r(36),c=r(24),f=r(1),l=f.process,d=f.setImmediate,p=f.clearImmediate,h=f.MessageChannel,v=f.Dispatch,m=0,g={},y=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},_=function(e){y.call(e.data)};d&&p||(d=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return g[++m]=function(){s("function"==typeof e?e:Function(e),t)},n(m),m},p=function(e){delete g[e]},"process"==r(19)(l)?n=function(e){l.nextTick(u(y,e,1))}:v&&v.now?n=function(e){v.now(u(y,e,1))}:h?(o=new h,i=o.port2,o.port1.onmessage=_,n=u(i.postMessage,i,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(n=function(e){f.postMessage(e+"","*")},f.addEventListener("message",_,!1)):n="onreadystatechange"in c("script")?function(e){a.appendChild(c("script")).onreadystatechange=function(){a.removeChild(this),y.call(e)}}:function(e){setTimeout(u(y,e,1),0)}),e.exports={set:d,clear:p}},function(e,t,r){var n=r(29),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},function(e,t,r){var n=r(23);e.exports=function(e){return Object(n(e))}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t,r){function n(e){return e&&"[object Function]"==l.call(e)}function o(e){return function(t,r,n){return n(null,e)}}var i=r(143),u=r(127),s=r(128),a=r(136),c=r(132),f=function(e,t,r){return r(null,!1)},l={}.toString;e.exports=function(e){if(!e||!e.secret)throw new Error("secret should be set");var t=e.secret;n(t)||(t=o(t));var r=e.isRevoked||f,l=e.userProperty||e.requestProperty||"user",d=void 0===e.credentialsRequired||e.credentialsRequired,p=function(n,o,s){var f;if("OPTIONS"===n.method&&n.headers.hasOwnProperty("access-control-request-headers")){if(!!~n.headers["access-control-request-headers"].split(",").map(function(e){return e.trim()}).indexOf("authorization"))return s()}if(void 0!==e.skip&&(console.warn("WARN: express-jwt: options.skip is deprecated"),console.warn("WARN: use app.use(jwt(options).unless({path: '/x'}))"),e.skip.indexOf(n.url)>-1))return s();if(e.getToken&&"function"==typeof e.getToken)try{f=e.getToken(n)}catch(e){return s(e)}else if(n.headers&&n.headers.authorization){var p=n.headers.authorization.split(" ");if(2!=p.length)return s(new u("credentials_bad_format",{message:"Format is Authorization: Bearer [token]"}));var h=p[0],v=p[1];if(!/^Bearer$/i.test(h))return s(new u("credentials_bad_scheme",{message:"Format is Authorization: Bearer [token]"}));f=v}if(!f)return d?s(new u("credentials_required",{message:"No authorization token was found"})):s();var m=i.decode(f,{complete:!0})||{};a.waterfall([function(e){4==t.length?t(n,m.header,m.payload,e):t(n,m.payload,e)},function(t,r){i.verify(f,t,e,function(e,t){e&&d?r(new u("invalid_token",e)):r(null,t)})},function(e,t){r(n,m.payload,function(r,n){r?t(r):n?t(new u("revoked_token",{message:"The token has been revoked."})):t(null,e)})}],function(e,t){if(e)return s(e);c(n,l,t),s()})};return p.unless=s,p}},function(e,t,r){"use strict";var n=r(131);e.exports=function(e,t){if("string"!=typeof e)throw new Error("Invalid token specified");t=t||{};var r=!0===t.header?0:1;return JSON.parse(n(e.split(".")[r]))}},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("url")},function(e,t,r){"use strict";(function(t){function n(e){return e&&e.__esModule?e:{default:e}}var o=r(52),i=n(o),u=r(147),s=n(u),a=r(3),c=n(a),f=r(138),l=n(f),d=r(0),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(d),h=r(17),v=r(72),m=n(v),g=r(78),y=n(g),_=r(75),w=n(_),x=r(6),b=n(x),E=r(7),A=n(E);e.exports=function(e,r){b.default.setProvider(e);var n=r?new p.WebtaskStorageContext(r,{force:1}):new p.FileStorageContext(i.default.join(t,"./data.json"),{mergeWrites:!0}),o=new c.default;return o.use(function(e,t,r){e.webtaskContext&&b.default.setProvider(p.configProvider.fromWebtaskContext(e.webtaskContext)),r()}),o.use((0,s.default)(":method :url :status :response-time ms - :res[content-length]",{stream:A.default.stream})),o.use(l.default.json()),o.use(l.default.urlencoded({extended:!1})),o.use(h.routes.dashboardAdmins({secret:(0,b.default)("EXTENSION_SECRET"),audience:"urn:criipto-verify",rta:(0,b.default)("AUTH0_RTA").replace("https://",""),domain:(0,b.default)("AUTH0_ISSUER_DOMAIN"),baseUrl:(0,b.default)("PUBLIC_WT_URL"),webtaskUrl:(0,b.default)("PUBLIC_WT_URL"),clientName:"Criipto Verify Administration",urlPrefix:"/admins",sessionStorageKey:"delegated-admin:apiToken",scopes:"read:connections create:connections"})),o.use("/api",(0,m.default)(n)),o.use("/app",c.default.static(i.default.join(t,"../dist"))),o.use("/meta",(0,y.default)()),o.get("*",(0,w.default)()),o.use(h.middlewares.errorHandler(A.default.error)),o}}).call(t,"/")},function(e,t,r){const n=r(51),o=r(50),i=r(0),u=r(32);e.exports=function(e){if(!e||"object"!=typeof e)throw new i.ArgumentError("Must provide the options");if(null===e.secret||void 0===e.secret)throw new i.ArgumentError("Must provide a valid secret");if("string"!=typeof e.secret||0===e.secret.length)throw new i.ArgumentError("The provided secret is invalid: "+e.secret);if(null===e.audience||void 0===e.audience)throw new i.ArgumentError("Must provide a valid secret");if("string"!=typeof e.audience||0===e.audience.length)throw new i.ArgumentError("The provided audience is invalid: "+e.audience);if(null===e.baseUrl||void 0===e.baseUrl)throw new i.ArgumentError("Must provide a valid base URL");if("string"!=typeof e.baseUrl||0===e.baseUrl.length)throw new i.ArgumentError("The provided base URL is invalid: "+e.baseUrl);const t=o({audience:e.audience,issuer:e.baseUrl,secret:e.secret,algorithms:["HS256"],credentialsRequired:e.credentialsRequired||!0});return function(r,n,o){t(r,n,function(t){return t?o(t):e.onLoginSuccess?e.onLoginSuccess(r,n,o):o()})}},e.exports.optional=function(t){const r=e.exports(t);return u(function(e){if(e&&e.headers&&e.headers.authorization&&0===e.headers.authorization.indexOf("Bearer "))try{const r=n(e.headers.authorization.split(" ")[1]);return r&&r.iss===t.baseUrl}catch(e){return!1}return!1},r)}},function(e,t,r){const n=r(51),o=r(50),i=r(144),u=r(0),s=r(32),a=r(0).UnauthorizedError;e.exports=function(e){if(!e||"object"!=typeof e)throw new u.ArgumentError("Must provide the options");if(null===e.domain||void 0===e.domain)throw new u.ArgumentError("Must provide a valid domain");if("string"!=typeof e.domain||0===e.domain.length)throw new u.ArgumentError("The provided domain is invalid: "+e.domain);if(null===e.audience||void 0===e.audience)throw new u.ArgumentError("Must provide a valid audience");if("string"!=typeof e.audience||0===e.audience.length)throw new u.ArgumentError("The provided audience is invalid: "+e.audience);const t=o({secret:i.expressJwtSecret({cache:!0,rateLimit:!0,jwksRequestsPerMinute:5,jwksUri:"https://"+e.domain+"/.well-known/jwks.json",handleSigningKeyError:function(e,t){return t(e instanceof i.SigningKeyNotFoundError?new a("A token was provided with an invalid kid"):e)}}),audience:e.audience,issuer:"https://"+e.domain+"/",algorithms:["RS256"],credentialsRequired:e&&e.credentialsRequired||!0});return function(r,n,o){t(r,n,function(t){return t?o(t):e.onLoginSuccess?e.onLoginSuccess(r,n,o):o()})}},e.exports.optional=function(t){const r=e.exports(t);return s(function(e){if(e&&e.headers&&e.headers.authorization&&0===e.headers.authorization.indexOf("Bearer "))try{const r=n(e.headers.authorization.split(" ")[1]);return r&&r.iss==="https://"+t.domain+"/"}catch(e){return!1}return!1},r)}},function(e,t,r){e.exports=function(e){return function(t,r,n,o){return e&&e(t),t&&t.status?(n.status(t.status),n.json({error:t.code||t.name,message:t.message||t.name})):(n.status(t.status||500),n.json({error:"InternalServerError",message:t.message||t.name}))}}},function(e,t,r){e.exports.authenticateAdmins=r(55),e.exports.authenticateUsers=r(56),e.exports.requireAuthentication=r(60),e.exports.errorHandler=r(57),e.exports.managementApiClient=r(59),e.exports.validateHookToken=r(61),e.exports.webtaskConfig=r(62)},function(e,t,r){const n=r(0);e.exports=function(e){return function(t,r,o){const i=t,u=t.user&&t.user.access_token&&t.user.access_token.length,s=u?{domain:e.domain,accessToken:t.user.access_token}:e;n.managementApi.getClient(s).then(function(e){return i.auth0=e,o(),null}).catch(function(e){o(e)})}}},function(e,t,r){const n=r(0).UnauthorizedError;e.exports=function(e,t,r){return e.user?r():r(new n("Authentication required for this endpoint."))}},function(e,t,r){const n=r(0);e.exports=function(e,t,r){if(null===e||void 0===e)throw new n.ArgumentError("Must provide the domain");if("string"!=typeof e||0===e.length)throw new n.ArgumentError("The provided domain is invalid: "+e);if(null===t||void 0===t)throw new n.ArgumentError("Must provide the webtaskUrl");if("string"!=typeof t||0===t.length)throw new n.ArgumentError("The provided webtaskUrl is invalid: "+t);if(null===r||void 0===r)throw new n.ArgumentError("Must provide the extensionSecret");if("string"!=typeof r||0===r.length)throw new n.ArgumentError("The provided extensionSecret is invalid: "+r);return function(o){if(null===o||void 0===o)throw new n.ArgumentError("Must provide the hookPath");if("string"!=typeof o||0===o.length)throw new n.ArgumentError("The provided hookPath is invalid: "+o);return function(i,u,s){if(i.headers.authorization&&"Bearer"===i.headers.authorization.split(" ")[0]){const a=i.headers.authorization.split(" ")[1];try{if(n.validateHookToken(e,t,o,r,a))return s()}catch(e){return s(e)}}return s(new n.HookTokenError("Hook token missing for the call to: "+o))}}}},function(e,t,r){const n=r(0);e.exports=function(e){return function(t,r,o){return t.webtaskContext&&e.setProvider(n.configProvider.fromWebtaskContext(t.webtaskContext)),o()}}},function(e,t,r){const n=r(3),o=r(140),i=r(87),u=r(0),s=r(31);e.exports=function(e){if(!e||"object"!=typeof e)throw new u.ArgumentError("Must provide the options");if(null===e.secret||void 0===e.secret)throw new u.ArgumentError("Must provide a valid secret");if("string"!=typeof e.secret||0===e.secret.length)throw new u.ArgumentError("The provided secret is invalid: "+e.secret);if(null===e.audience||void 0===e.audience)throw new u.ArgumentError("Must provide a valid secret");if("string"!=typeof e.audience||0===e.audience.length)throw new u.ArgumentError("The provided audience is invalid: "+e.audience);if(null===e.rta||void 0===e.rta)throw new u.ArgumentError("Must provide a valid rta");if("string"!=typeof e.rta||0===e.rta.length)throw new u.ArgumentError("The provided rta is invalid: "+e.rta);if(null===e.domain||void 0===e.domain)throw new u.ArgumentError("Must provide a valid domain");if("string"!=typeof e.domain||0===e.domain.length)throw new u.ArgumentError("The provided domain is invalid: "+e.domain);if(null===e.baseUrl||void 0===e.baseUrl)throw new u.ArgumentError("Must provide a valid base URL");if("string"!=typeof e.baseUrl||0===e.baseUrl.length)throw new u.ArgumentError("The provided base URL is invalid: "+e.baseUrl);if(null===e.clientName||void 0===e.clientName)throw new u.ArgumentError("Must provide a valid client name");if("string"!=typeof e.clientName||0===e.clientName.length)throw new u.ArgumentError("The provided client name is invalid: "+e.clientName);const t=e.stateKey||"state",r=e.urlPrefix||"",a=e.sessionStorageKey||"apiToken",c=n.Router();return c.get(r+"/login",function(n,i){const a=o.randomBytes(16).toString("hex");i.cookie(t,a);const c=new u.SessionManager(e.rta,e.domain,e.baseUrl),f=c.createAuthorizeUrl({redirectUri:s.getBaseUrl(n)+r+"/login/callback",scopes:e.scopes,expiration:e.expiration});i.redirect(f+"&state="+a)}),c.post(r+"/login/callback",i(),function(r,n,o){return r.cookies&&r.cookies[t]===r.body.state?new u.SessionManager(e.rta,e.domain,e.baseUrl).create(r.body.id_token,r.body.access_token,{secret:e.secret,issuer:e.baseUrl,audience:e.audience}).then(function(e){n.header("Content-Type","text/html"),n.status(200).send('<html><head><script type="text/javascript">sessionStorage.setItem("'+a+'", "'+e+'");window.location.href = "'+s.getBaseUrl(r)+'";<\/script></head></html>')}).catch(function(e){o(e)}):o(new u.ValidationError("Login failed. State mismatch."))}),c.get(r+"/logout",function(t,r){const n=encodeURIComponent(s.getBaseUrl(t));r.header("Content-Type","text/html"),r.status(200).send('<html><head><script type="text/javascript">sessionStorage.removeItem("'+a+'");window.location.href = "https://'+e.rta+"/v2/logout/?returnTo="+n+"&client_id="+n+'";<\/script></head></html>')}),c.get("/.well-known/oauth2-client-configuration",function(t,n){n.header("Content-Type","application/json"),n.status(200).send({redirect_uris:[s.getBaseUrl(t)+r+"/login/callback"],client_name:e.clientName,post_logout_redirect_uris:[s.getBaseUrl(t)]})}),c}},function(e,t,r){e.exports.dashboardAdmins=r(63)},function(e,t,r){const n=r(0),o=r(151);e.exports.createServer=function(e){const t=n.createServer(e);var r=null;return o.fromExpress(function(e,n){return r||(r=t(e.webtaskContext)),r(e,n)})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.default=function(e,t){var r=new n.ValidationError(e.message||""),o=t+"-script error";return e.stack&&(o=e.stack.replace(/SAFE_EVAL_\d+/,t+"-script error").replace("evalmachine.<anonymous>","line")),r.stack=o.split("\n").slice(0,2).join(" "),r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=s(e,"roles"),r=s(e,"permissions"),n=a(t);return n>=u.USER_ACCESS_LEVEL&&r.indexOf(u.USER_PERMISSION)<0&&r.push(u.USER_PERMISSION),n===u.ADMIN_ACCESS_LEVEL&&r.indexOf(u.ADMIN_PERMISSION)<0&&r.push(u.ADMIN_PERMISSION),r};var n=r(16),o=function(e){return e&&e.__esModule?e:{default:e}}(n),i=r(11),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i),s=function(e,t){var r=[e[t],e.app_metadata&&e.app_metadata[t],e.app_metadata&&e.app_metadata.authorization&&e.app_metadata.authorization[t]];return(0,o.default)(r).flatten().filter(function(e){return e}).uniq().value()},a=function(e){var t=0;if(!e)return t;var r=Array.isArray(e)?e:e.replace(", ",",","g").split(",");return r.indexOf(u.USER_ROLE_NAME)>=0&&(t=u.USER_ACCESS_LEVEL),r.indexOf(u.ADMIN_ROLE_NAME)>=0&&(t=u.ADMIN_ACCESS_LEVEL),t}},function(e,t,r){"use strict";var n=r(0);e.exports=function(e){return function(t,r,o){return!t.user||!t.user.scope||t.user.scope.indexOf(e)<0?o(new n.ForbiddenError("Cannot perform action. Missing scope "+e)):o()}}},function(e,t,r){"use strict";var n=r(15),o=function(e){return e&&e.__esModule?e:{default:e}}(n),i=r(0);e.exports=function(e,t){return function(r,n,u){return r.auth0.users.get({id:r.params.id}).then(function(n){if(!n)return o.default.reject(new i.NotFoundError("User not found: "+r.params.id));var u={request:{user:r.user},payload:{user:n,action:e}};return t.execute("access",u).then(function(){r.targetUser=n})}).then(function(){return u()}).catch(u)}}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(15),i=n(o),u=r(149),s=n(u),a=r(6),c=n(a),f=function(e,t){return new i.default(function(r,n){return t?s.default.del("https://"+(0,c.default)("AUTH0_DOMAIN")+"/api/v2/guardian/enrollments/"+t).set("Authorization","Bearer "+e).set("Content-Type","application/json").end(function(e,t){return e?n(e):r()}):r(null)})},l=function(e,t){return new i.default(function(r,n){s.default.get("https://"+(0,c.default)("AUTH0_DOMAIN")+"/api/v2/users/"+t+"/enrollments").set("Authorization","Bearer "+e).set("Content-Type","application/json").end(function(e,t){if(e)return n(e);var o=t&&t.body&&t.body[0]?t.body[0].id:null;return r(o)})})};t.default=function(e,t){return l(e,t).then(function(t){return f(e,t)})}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(33),i=n(o),u=r(85),s=n(u),a=r(86),c=n(a),f=r(15),l=n(f),d=r(134),p=n(d),h=r(145),v=n(h),m=r(0),g=r(7),y=n(g),_=r(66),w=n(_),x=function(){function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;if((0,s.default)(this,e),null===t||void 0===t)throw new m.ArgumentError("Must provide a storage object.");this.log=y.default.debug.bind(y.default),this.cache={},this.storage=t,this.getCached=l.default.promisify((0,v.default)({load:function(e,t){r.get(e).then(function(e){return t(null,e),null}).catch(t)},hash:function(e){return e},max:100,maxAge:n}))}return(0,c.default)(e,[{key:"get",value:function(e){return this.storage.read().then(function(t){return t&&t.scripts?t.scripts[e]:null})}},{key:"save",value:function(e,t){var r=this;return this.storage.read().then(function(r){return r.scripts||(r.scripts={}),r.scripts[e]=t,r}).then(function(e){return r.storage.write(e)})}},{key:"readCustomData",value:function(){return this.storage.read().then(function(e){return e.customData||{}})}},{key:"writeCustomData",value:function(e){var t=this;return this.storage.read().then(function(t){return t.customData=e,t}).then(function(e){return t.storage.write(e)})}},{key:"createContext",value:function(e){return(0,i.default)({log:this.log,global:this.cache,read:this.readCustomData.bind(this),write:this.writeCustomData.bind(this)},e)}},{key:"dynamicRequire",value:function(e){try{return require(e)}catch(e){}return!function(){var e=new Error('Cannot find module "."');throw e.code="MODULE_NOT_FOUND",e}()}},{key:"execute",value:function(e,t){var r=this;return this.getCached(e).then(function(n){return n?(y.default.debug("Executing Delegated Admin hook: "+e),new l.default(function(o,i){try{(0,p.default)(n,{require:r.dynamicRequire})(r.createContext(t),function(t,r){t?(y.default.error("Failed to execute Delegated Admin hook ("+e+'): "'+t+'"'),i((0,w.default)(t,e))):o(r)})}catch(t){y.default.error("Failed to compile Delegated Admin hook ("+e+'): "'+t+'"'),i((0,w.default)(t,e))}})):null})}}]),e}();t.default=x},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(84),i=n(o),u=r(3),s=r(16),a=n(s),c=r(146),f=n(c),l=r(17),d=r(0),p=n(d),h=r(22),v=r(6),m=n(v),g=r(71),y=n(g),_=r(67),w=(n(_),r(11)),x=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(w),b=r(73),E=n(b),A=r(74),S=n(A),O=r(79),T=n(O),U=r(77),I=n(U),k=r(76),j=n(k),M=r(80),C=n(M);t.default=function(e){var t=new y.default(e),r=l.middlewares.managementApiClient({domain:(0,m.default)("AUTH0_ISSUER_DOMAIN"),clientId:(0,m.default)("AUTH0_CLIENT_ID"),clientSecret:(0,m.default)("AUTH0_CLIENT_SECRET")}),n=(0,u.Router)(),o=function(e){return a.default.get(e,"headers.authorization","").split(" ")[1]},s=function(e,t){if(global.daeUser=global.daeUser||{},global.daeUser[t.sub]=global.daeUser[t.sub]||{exp:0,token:""},a.default.isFunction(global.daeUser[t.sub].then))return global.daeUser[t.sub];if(global.daeUser[t.sub].exp>(0,f.default)().unix()&&e&&global.daeUser[t.sub].token===e)return a.default.assign(t,global.daeUser[t.sub]),i.default.resolve(t);e||console.error("no token found");var r=p.default.managementApi.getClient({domain:(0,m.default)("AUTH0_ISSUER_DOMAIN"),clientId:(0,m.default)("AUTH0_CLIENT_ID"),clientSecret:(0,m.default)("AUTH0_CLIENT_SECRET")}).then(function(r){return r.users.get({id:t.sub}).then(function(r){return a.default.assign(t,r),t.token=e,global.daeUser[t.sub]=t,t})});return global.daeUser[t.sub]=r,global.daeUser[t.sub]};return n.use(l.middlewares.authenticateAdmins.optional({credentialsRequired:!1,secret:(0,m.default)("EXTENSION_SECRET"),audience:"urn:delegated-admin",baseUrl:(0,m.default)("PUBLIC_WT_URL"),onLoginSuccess:function(e,t,r){var n=e;return s(o(e),e.user).then(function(e){return n.user=e,n.user.scope=[x.USER_PERMISSION,x.ADMIN_PERMISSION],r()}).catch(r)}})),n.use(function(e,t,r){t.setHeader("Cache-control","no-cache, no-store"),t.setHeader("Pragma","no-cache"),t.setHeader("Expires","0"),r()}),n.use((0,h.requireScope)(x.USER_PERMISSION)),n.use("/applications",r,(0,E.default)()),n.use("/connections",r,(0,S.default)(t)),n.use("/scripts",(0,h.requireScope)(x.ADMIN_PERMISSION),(0,T.default)(e,t)),n.use("/users",r,(0,C.default)(e,t)),n.use("/logs",r,(0,j.default)(t)),n.use("/me",(0,I.default)(t)),n.get("/settings",function(e,r,n){var o={request:{user:e.user}};t.execute("settings",o).then(function(e){return r.json({settings:e||{}})}).catch(n)}),n}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(16),o=function(e){return e&&e.__esModule?e:{default:e}}(n),i=r(3);t.default=function(){var e=(0,i.Router)();return e.get("/",function(e,t,r){e.auth0.clients.getAll({fields:"client_id,name,callbacks,global,app_type"}).then(function(e){return o.default.chain(e).filter(function(e){return!e.global&&("spa"===e.app_type||"native"===e.app_type||"regular_web"===e.app_type)}).sortBy(function(e){return e.name.toLowerCase()}).value()}).then(function(e){return t.json(e)}).catch(r)}),e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(16),o=function(e){return e&&e.__esModule?e:{default:e}}(n),i=r(3);t.default=function(e){var t=(0,i.Router)();return t.get("/",function(t,r,n){t.auth0.connections.getAll({fields:"id,name,strategy,enabled_clients,options"}).then(function(r){var n={request:{user:t.user}};return e.execute("settings",n).then(function(e){var t=o.default.chain(r).filter(function(e){return"auth0"===e.strategy}).sortBy(function(e){return e.name.toLowerCase()}).value();return e&&e.connections&&Array.isArray(e.connections)&&e.connections.length&&(t=t.filter(function(t){return e.connections.indexOf(t.name)>=0})),t})}).then(function(e){return r.json(e)}).catch(n)}),t}},function(e,t,r){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(33),i=(n(o),r(142)),u=(n(i),r(141)),s=n(u),a=r(52),c=(n(a),r(17)),f=r(6),l=n(f);t.default=function(){var e='\n    <!DOCTYPE html>\n    <html lang="en">\n    <head>\n      <title><%= config.TITLE %></title>\n      <meta charset="UTF-8" />\n      <meta http-equiv="X-UA-Compatible" content="IE=Edge" />\n      <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n      <link rel="shortcut icon" href="https://cdn.auth0.com/styleguide/4.6.13/lib/logos/img/favicon.png">\n      <meta name="viewport" content="width=device-width, initial-scale=1">\n      <link rel="stylesheet" type="text/css" href="https://cdn.auth0.com/styles/zocial.min.css" />\n      <link rel="stylesheet" type="text/css" href="https://cdn.auth0.com/manage/v0.3.1672/css/index.min.css" />\n      <link rel="stylesheet" type="text/css" href="https://cdn.auth0.com/styleguide/4.6.13/index.min.css" />\n      <% if (assets.style) { %><link rel="stylesheet" type="text/css" href="/app/<%= assets.style %>" /><% } %>\n      <% if (assets.version) { %><link rel="stylesheet" type="text/css" href="<%= assets.cdnPath %>/auth0-criipto-verify-admin.ui.<%= assets.version %>.css" /><% } %>\n      <% if (assets.customCss) { %><link rel="stylesheet" type="text/css" href="<%= assets.customCss %>" /><% } %>\n    </head>\n    <body>\n      <div id="app"></div>\n      <script src="https://cdn.auth0.com/js/auth0/8.10.1/auth0.min.js"><\/script>\n      <script type="text/javascript" src="//cdn.auth0.com/manage/v0.3.1672/js/bundle.js"><\/script>\n      <script type="text/javascript">window.config = <%- JSON.stringify(config) %>;<\/script>\n      <% if (assets.vendors) { %><script type="text/javascript" src="/app/<%= assets.vendors %>"><\/script><% } %>\n      <% if (assets.app) { %><script type="text/javascript" src="/app/<%= assets.app %>"><\/script><% } %>\n      <% if (assets.version) { %>\n      <script type="text/javascript" src="<%= assets.cdnPath %>/auth0-criipto-verify-admin.ui.vendors.<%= assets.version %>.js"><\/script>\n      <script type="text/javascript" src="<%= assets.cdnPath %>/auth0-criipto-verify-admin.ui.<%= assets.version %>.js"><\/script>\n      <% } %>\n    </body>\n    </html>\n    ';return function(t,r,n){if(0===t.url.indexOf("/api"))return n();var o={AUTH0_DOMAIN:(0,l.default)("CRIIPTO_VERIFY_AUTH0_DOMAIN"),AUTH0_TOKEN_ISSUER:"https://"+(0,l.default)("CRIIPTO_VERIFY_AUTH0_DOMAIN")+"/",CRIIPTO_VERIFY_CLIENT_ID:(0,l.default)("CRIIPTO_VERIFY_CLIENT_ID"),EXTEND_URL:(0,l.default)("EXTEND_URL"),BASE_URL:c.urlHelpers.getBaseUrl(t),BASE_PATH:c.urlHelpers.getBasePath(t),TITLE:(0,l.default)("TITLE"),FEDERATED_LOGOUT:"true"===(0,l.default)("FEDERATED_LOGOUT")},i=(0,l.default)("CDN_PATH")||"https://rawgit.com/GreanTech/auth0-criipto-verify-extension/master/dist";return r.send(s.default.render(e,{config:o,assets:{customCss:(0,l.default)("CUSTOM_CSS"),version:"1.0.0",cdnPath:i}}))}}}).call(t,"/")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(15),o=function(e){return e&&e.__esModule?e:{default:e}}(n),i=r(3),u=r(0),s=r(22),a=r(11),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(a);t.default=function(e){var t=(0,i.Router)();return t.get("/",(0,s.requireScope)(c.ADMIN_PERMISSION),function(e,t,r){e.auth0.logs.getAll({q:"NOT type: sapi AND NOT type:fapi",include_totals:!0,sort:"date:-1",per_page:20,page:e.query.page||0,fields:"type,date,client_name,user_name,description,connection"}).then(function(e){return t.json(e)}).catch(r)}),t.get("/:id",function(t,r,n){t.auth0.logs.get({id:t.params.id}).then(function(r){return!r||"fapi"!==r.type&&"sapi"!==r.type?t.user.scope.indexOf(c.ADMIN_PERMISSION)>=0?r:t.auth0.users.get({id:r.user_id}).then(function(n){if(!n)throw new u.NotFoundError("User not found: "+t.params.id);var o={request:{user:t.user},payload:{user:n}};return e.execute("access",o).then(function(){return r})}):o.default.reject(new Error("Invalid log record."))}).then(function(e){return r.json({log:e})}).catch(n)}),t}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),i=n(o),u=r(7),s=n(u),a=r(11),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(a);t.default=function(e){var t=i.default.Router();return t.get("/",function(t,r){var n=0;t.user.scope.indexOf(c.ADMIN_PERMISSION)>=0?n=2:t.user.scope.indexOf(c.USER_PERMISSION)>=0&&(n=1);var o={createMemberships:!1,memberships:[],role:n},i={request:{user:t.user},payload:{user:t.user}};e.execute("memberships",i).then(function(e){return e&&Array.isArray(e)?o.memberships=e:e&&(o.createMemberships=e.createMemberships||!1,o.memberships=e.memberships||[]),r.json(o)}).catch(function(e){s.default.error(e.message),r.json(o)})}),t}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),i=n(o),u=r(129),s=n(u);t.default=function(){var e=i.default.Router();return e.get("/",function(e,t){t.status(200).send(s.default)}),e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),o=r(0),i=r(11),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i);t.default=function(e,t){var r=(0,n.Router)();return r.get("/:name",function(e,r,n){return u.VALID_SCRIPTS.indexOf(e.params.name)<0?n(new o.ValidationError("Invalid script name: "+e.params.name)):t.get(e.params.name).then(function(e){return r.json({script:e})}).catch(n)}),r.post("/:name",function(e,r,n){return u.VALID_SCRIPTS.indexOf(e.params.name)<0?n(new o.ValidationError("Invalid script name: "+e.params.name)):t.save(e.params.name,e.body.script).then(function(){return r.status(200).send()}).catch(n)}),r}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){var n=e.targetUser,o={method:"update",request:{user:e.user,originalUser:n},payload:e.body,userFields:r};return t.execute("create",o).then(function(e){return e})}Object.defineProperty(t,"__esModule",{value:!0});var i=r(16),u=n(i),s=r(137),a=n(s),c=r(148),f=n(c),l=r(15),d=n(l),p=r(3),h=r(0),v=r(6),m=n(v),g=r(7),y=n(g),_=r(22),w=r(70),x=n(w);t.default=function(e,t){var r=(0,p.Router)();return r.post("/",function(e,r,n){if(e.body.password!==e.body.repeatPassword)throw new h.ValidationError("The passwords do not match.");var o={request:{user:e.user}};t.execute("settings",o).then(function(o){var i={method:"create",request:{user:e.user},payload:e.body,userFields:o&&o.userFields};return t.execute("create",i).then(function(e){if(!e.email||0===e.email.length)throw new h.ValidationError("The email address is required.");return e}).then(function(t){return e.auth0.users.create(t)}).then(function(){return r.status(201).send()}).catch(n)})}),r.get("/",function(e,r,n){var o={request:{user:e.user},payload:{search:e.query.search,filterBy:e.query.filterBy}},i=e.query.search;e.query.filterBy&&e.query.filterBy.length>0&&(i=e.query.filterBy+':"'+e.query.search+'"');var u=e.query.sortProperty&&e.query.sortOrder?e.query.sortProperty+":"+e.query.sortOrder:"last_login:-1";t.execute("filter",o).then(function(t){var r={sort:u,q:i&&t?"("+i+") AND "+t:i||t,per_page:e.query.per_page||10,page:e.query.page||0,include_totals:!0,fields:"user_id,username,name,email,identities,picture,last_login,logins_count,multifactor,blocked,app_metadata,user_metadata",search_engine:"v2"};return e.auth0.users.getAll(r)}).then(function(r){return d.default.map(r.users,function(n,o){return t.execute("access",{request:{user:e.user},payload:{user:n,action:"read:user"}}).then(function(e){r.users[o]=e||n})}).then(function(){return r})}).then(function(e){return r.json(e)}).catch(function(e){return n(e)})}),r.get("/:id",(0,_.verifyUserAccess)("read:user",t),function(e,r,n){var o=e.targetUser,i={request:{user:e.user},payload:{user:o}};return t.execute("memberships",i).then(function(e){return e&&Array.isArray(e)?{user:o,memberships:e}:e&&e.memberships?{user:o,memberships:e.memberships}:{user:o,memberships:[]}}).then(function(e){return r.json(e)}).catch(function(e){y.default.error("Failed to get user because: ",e),n(e)})}),r.delete("/:id",(0,_.verifyUserAccess)("delete:user",t),function(e,t,r){return e.user.sub===e.params.id?r(new h.ValidationError("You cannot delete yourself.")):e.auth0.users.delete({id:e.params.id}).then(function(){return t.sendStatus(204)}).catch(r)}),r.patch("/:id",(0,_.verifyUserAccess)("change:profile",t),function(e,r,n){var i={request:{user:e.user}};t.execute("settings",i).then(function(r){return o(e,t,r.userFields)}).then(function(t){return e.auth0.users.update({id:e.params.id},t)}).then(function(){return r.status(204).send()}).catch(n)}),r.post("/:id/password-reset",(0,_.verifyUserAccess)("reset:password",t),function(e,t,r){var n=new a.default.AuthenticationClient({domain:(0,m.default)("AUTH0_ISSUER_DOMAIN"),clientId:(0,m.default)("AUTH0_CLIENT_ID")}),o=e.targetUser,i={email:o.email,connection:e.body.connection,client_id:e.body.clientId};return n.requestChangePasswordEmail(i).then(function(){return t.sendStatus(204)}).catch(r)}),r.put("/:id/change-password",(0,_.verifyUserAccess)("change:password",t),function(e,r,n){if(e.body.password!==e.body.confirmPassword)return n(new h.ArgumentError("Passwords don't match"));var i={request:{user:e.user}};t.execute("settings",i).then(function(i){return i&&i.userFields?o(e,t,i.userFields).then(function(t){if(!t.password)throw new h.ValidationError("The password is required.");var o=u.default.defaults(t,{connection:e.body.connection,verify_password:!1});return e.auth0.users.update({id:e.params.id},o).then(function(){return r.sendStatus(204)}).catch(n)}):e.auth0.users.update({id:e.params.id},{password:e.body.password,connection:e.body.connection,verify_password:!1}).then(function(){return r.sendStatus(204)}).catch(n)}).catch(n)}),r.put("/:id/change-username",(0,_.verifyUserAccess)("change:username",t),function(e,r,n){var i={request:{user:e.user}};t.execute("settings",i).then(function(i){i&&i.userFields?o(e,t,i.userFields).then(function(t){if(!t.username)throw new h.ValidationError("The username is required.");return e.auth0.users.update({id:e.params.id},t)}).then(function(){return r.status(204).send()}).catch(n):e.auth0.users.update({id:e.params.id},{username:e.body.username}).then(function(){return r.sendStatus(204)}).catch(n)}).catch(n)}),r.put("/:id/change-email",(0,_.verifyUserAccess)("change:email",t),function(e,r,n){var i={request:{user:e.user}};t.execute("settings",i).then(function(i){i&&i.userFields?o(e,t,i.userFields).then(function(t){if(!t.email)throw new h.ValidationError("The email is required.");return e.auth0.users.update({id:e.params.id},t)}).then(function(){return r.status(204).send()}).catch(n):e.auth0.users.update({id:e.params.id},{email:e.body.email}).then(function(){return r.sendStatus(204)}).catch(n)}).catch(n)}),r.get("/:id/devices",(0,_.verifyUserAccess)("read:devices",t),function(e,t,r){e.auth0.deviceCredentials.getAll({user_id:e.params.id}).then(function(e){return t.json({devices:e})}).catch(r)}),r.get("/:id/logs",(0,_.verifyUserAccess)("read:logs",t),function(e,t,r){h.managementApi.getAccessTokenCached((0,m.default)("AUTH0_ISSUER_DOMAIN"),(0,m.default)("AUTH0_CLIENT_ID"),(0,m.default)("AUTH0_CLIENT_SECRET")).then(function(n){var o={uri:"https://"+(0,m.default)("AUTH0_ISSUER_DOMAIN")+"/api/v2/users/"+encodeURIComponent(e.params.id)+"/logs",qs:{include_totals:!0},headers:{authorization:"Bearer "+n},json:!0};return f.default.get(o,function(e,n,o){return e?r(e):n.statusCode<200||n.statusCode>=300?(y.default.error("Log response failed: ",n.headers),r(new Error(o&&(o.error||o.message||o.code)||"Request Error: "+n.statusCode))):t.json(o)})}).catch(r)}),r.delete("/:id/multifactor/:provider",(0,_.verifyUserAccess)("remove:multifactor-provider",t),function(e,t,r){if("guardian"!==e.params.provider)return e.auth0.users.deleteMultifactorProvider({id:e.params.id,provider:e.params.provider}).then(function(){return t.sendStatus(204)}).catch(r);h.managementApi.getAccessTokenCached((0,m.default)("AUTH0_ISSUER_DOMAIN"),(0,m.default)("AUTH0_CLIENT_ID"),(0,m.default)("AUTH0_CLIENT_SECRET")).then(function(t){return(0,x.default)(t,e.params.id)}).then(function(){return t.sendStatus(204)}).catch(r)}),r.put("/:id/block",(0,_.verifyUserAccess)("block:user",t),function(e,t,r){e.auth0.users.update({id:e.params.id},{blocked:!0}).then(function(){return t.sendStatus(204)}).catch(r)}),r.put("/:id/unblock",(0,_.verifyUserAccess)("unblock:user",t),function(e,t,r){e.auth0.users.update({id:e.params.id},{blocked:!1}).then(function(){return t.sendStatus(204)}).catch(r)}),r.post("/:id/send-verification-email",(0,_.verifyUserAccess)("send:verification-email",t),function(e,t,r){var n={user_id:e.params.id};e.auth0.jobs.verifyEmail(n).then(function(){return t.status(204).send()}).catch(r)}),r}},function(e,t,r){"use strict";var n=r(17),o=r(54),i=r(6),u=r(7),s=n.createServer(function(e,t){return u.info("Starting Criipto Verify Admin Extension - Version:","1.0.0"),o(e,t)});e.exports=function(e,t,r){i.setValue("PUBLIC_WT_URL",n.urlHelpers.getWebtaskUrl(t)),s(e,t,r)}},function(e,t,r){e.exports={default:r(89),__esModule:!0}},function(e,t,r){e.exports={default:r(90),__esModule:!0}},function(e,t,r){e.exports={default:r(91),__esModule:!0}},function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(83),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,o.default)(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()},function(e,t,r){"use strict";function n(e,t){return function(r,n,o){if(r.cookies)return o();var u=r.headers.cookie,c=!e||Array.isArray(e)?e||[]:[e];if(r.secret=c[0],r.cookies=Object.create(null),r.signedCookies=Object.create(null),!u)return o();r.cookies=a.parse(u,t),0!==c.length&&(r.signedCookies=s(r.cookies,c),r.signedCookies=i(r.signedCookies)),r.cookies=i(r.cookies),o()}}function o(e){if("string"==typeof e&&"j:"===e.substr(0,2))try{return JSON.parse(e.slice(2))}catch(e){return}}function i(e){for(var t,r,n=Object.keys(e),i=0;i<n.length;i++)t=n[i],(r=o(e[t]))&&(e[t]=r);return e}function u(e,t){if("string"==typeof e){if("s:"!==e.substr(0,2))return e;for(var r=!t||Array.isArray(t)?t||[]:[t],n=0;n<r.length;n++){var o=c.unsign(e.slice(2),r[n]);if(!1!==o)return o}return!1}}function s(e,t){for(var r,n,o,i=Object.keys(e),s=Object.create(null),a=0;a<i.length;a++)n=i[a],o=e[n],r=u(o,t),o!==r&&(s[n]=r,delete e[n]);return s}var a=r(88),c=r(139);e.exports=n,e.exports.JSONCookie=o,e.exports.JSONCookies=i,e.exports.signedCookie=u,e.exports.signedCookies=s},function(e,t,r){"use strict";function n(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var r={},n=t||{},o=e.split(a),s=n.decode||u,c=0;c<o.length;c++){var f=o[c],l=f.indexOf("=");if(!(l<0)){var d=f.substr(0,l).trim(),p=f.substr(++l,f.length).trim();'"'==p[0]&&(p=p.slice(1,-1)),void 0==r[d]&&(r[d]=i(p,s))}}return r}function o(e,t,r){var n=r||{},o=n.encode||s;if("function"!=typeof o)throw new TypeError("option encode is invalid");if(!c.test(e))throw new TypeError("argument name is invalid");var i=o(t);if(i&&!c.test(i))throw new TypeError("argument val is invalid");var u=e+"="+i;if(null!=n.maxAge){var a=n.maxAge-0;if(isNaN(a))throw new Error("maxAge should be a Number");u+="; Max-Age="+Math.floor(a)}if(n.domain){if(!c.test(n.domain))throw new TypeError("option domain is invalid");u+="; Domain="+n.domain}if(n.path){if(!c.test(n.path))throw new TypeError("option path is invalid");u+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");u+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(u+="; HttpOnly"),n.secure&&(u+="; Secure"),n.sameSite){switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"strict":u+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return u}function i(e,t){try{return t(e)}catch(t){return e}}t.parse=n,t.serialize=o;var u=decodeURIComponent,s=encodeURIComponent,a=/; */,c=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},function(e,t,r){r(119),e.exports=r(4).Object.assign},function(e,t,r){r(120);var n=r(4).Object;e.exports=function(e,t,r){return n.defineProperty(e,t,r)}},function(e,t,r){r(121),r(123),r(126),r(122),r(124),r(125),e.exports=r(4).Promise},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},function(e,t,r){var n=r(30),o=r(47),i=r(115);e.exports=function(e){return function(t,r,u){var s,a=n(t),c=o(a.length),f=i(u,c);if(e&&r!=r){for(;c>f;)if((s=a[f++])!=s)return!0}else for(;c>f;f++)if((e||f in a)&&a[f]===r)return e||f||0;return!e&&-1}}},function(e,t,r){var n=r(20),o=r(99),i=r(98),u=r(5),s=r(47),a=r(117),c={},f={},t=e.exports=function(e,t,r,l,d){var p,h,v,m,g=d?function(){return e}:a(e),y=n(r,l,t?2:1),_=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(i(g)){for(p=s(e.length);p>_;_++)if((m=t?y(u(h=e[_])[0],h[1]):y(e[_]))===c||m===f)return m}else for(v=g.call(e);!(h=v.next()).done;)if((m=o(v,y,h.value,t))===c||m===f)return m};t.BREAK=c,t.RETURN=f},function(e,t,r){e.exports=!r(8)&&!r(25)(function(){return 7!=Object.defineProperty(r(24)("div"),"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){var n=r(13),o=r(2)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||i[o]===e)}},function(e,t,r){var n=r(5);e.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&n(i.call(e)),t}}},function(e,t,r){"use strict";var n=r(105),o=r(43),i=r(27),u={};r(10)(u,r(2)("iterator"),function(){return this}),e.exports=function(e,t,r){e.prototype=n(u,{next:o(1,r)}),i(e,t+" Iterator")}},function(e,t,r){var n=r(2)("iterator"),o=!1;try{var i=[7][n]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var i=[7],u=i[n]();u.next=function(){return{done:r=!0}},i[n]=function(){return u},e(i)}catch(e){}return r}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){var n=r(1),o=r(46).set,i=n.MutationObserver||n.WebKitMutationObserver,u=n.process,s=n.Promise,a="process"==r(19)(u);e.exports=function(){var e,t,r,c=function(){var n,o;for(a&&(n=u.domain)&&n.exit();e;){o=e.fn,e=e.next;try{o()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(a)r=function(){u.nextTick(c)};else if(i){var f=!0,l=document.createTextNode("");new i(c).observe(l,{characterData:!0}),r=function(){l.data=f=!f}}else if(s&&s.resolve){var d=s.resolve();r=function(){d.then(c)}}else r=function(){o.call(n,c)};return function(n){var o={fn:n,next:void 0};t&&(t.next=o),e||(e=o,r()),t=o}}},function(e,t,r){"use strict";var n=r(40),o=r(107),i=r(110),u=r(48),s=r(37),a=Object.assign;e.exports=!a||r(25)(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=a({},e)[r]||Object.keys(a({},t)).join("")!=n})?function(e,t){for(var r=u(e),a=arguments.length,c=1,f=o.f,l=i.f;a>c;)for(var d,p=s(arguments[c++]),h=f?n(p).concat(f(p)):n(p),v=h.length,m=0;v>m;)l.call(p,d=h[m++])&&(r[d]=p[d]);return r}:a},function(e,t,r){var n=r(5),o=r(106),i=r(35),u=r(28)("IE_PROTO"),s=function(){},a=function(){var e,t=r(24)("iframe"),n=i.length;for(t.style.display="none",r(36).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),a=e.F;n--;)delete a.prototype[i[n]];return a()};e.exports=Object.create||function(e,t){var r;return null!==e?(s.prototype=n(e),r=new s,s.prototype=null,r[u]=e):r=a(),void 0===t?r:o(r,t)}},function(e,t,r){var n=r(14),o=r(5),i=r(40);e.exports=r(8)?Object.defineProperties:function(e,t){o(e);for(var r,u=i(t),s=u.length,a=0;s>a;)n.f(e,r=u[a++],t[r]);return e}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){var n=r(21),o=r(48),i=r(28)("IE_PROTO"),u=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),n(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?u:null}},function(e,t,r){var n=r(21),o=r(30),i=r(94)(!1),u=r(28)("IE_PROTO");e.exports=function(e,t){var r,s=o(e),a=0,c=[];for(r in s)r!=u&&n(s,r)&&c.push(r);for(;t.length>a;)n(s,r=t[a++])&&(~i(c,r)||c.push(r));return c}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,r){var n=r(10);e.exports=function(e,t,r){for(var o in t)r&&e[o]?e[o]=t[o]:n(e,o,t[o]);return e}},function(e,t,r){e.exports=r(10)},function(e,t,r){"use strict";var n=r(1),o=r(4),i=r(14),u=r(8),s=r(2)("species");e.exports=function(e){var t="function"==typeof o[e]?o[e]:n[e];u&&t&&!t[s]&&i.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,r){var n=r(29),o=r(23);e.exports=function(e){return function(t,r){var i,u,s=String(o(t)),a=n(r),c=s.length;return a<0||a>=c?e?"":void 0:(i=s.charCodeAt(a),i<55296||i>56319||a+1===c||(u=s.charCodeAt(a+1))<56320||u>57343?e?s.charAt(a):i:e?s.slice(a,a+2):u-56320+(i-55296<<10)+65536)}}},function(e,t,r){var n=r(29),o=Math.max,i=Math.min;e.exports=function(e,t){return e=n(e),e<0?o(e+t,0):i(e,t)}},function(e,t,r){var n=r(12);e.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,r){var n=r(34),o=r(2)("iterator"),i=r(13);e.exports=r(4).getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[n(e)]}},function(e,t,r){"use strict";var n=r(92),o=r(102),i=r(13),u=r(30);e.exports=r(38)(Array,"Array",function(e,t){this._t=u(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,r):"values"==t?o(0,e[r]):o(0,[r,e[r]])},"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},function(e,t,r){var n=r(9);n(n.S+n.F,"Object",{assign:r(104)})},function(e,t,r){var n=r(9);n(n.S+n.F*!r(8),"Object",{defineProperty:r(14).f})},function(e,t){},function(e,t,r){"use strict";var n,o,i,u,s=r(39),a=r(1),c=r(20),f=r(34),l=r(9),d=r(12),p=r(18),h=r(93),v=r(95),m=r(45),g=r(46).set,y=r(103)(),_=r(26),w=r(41),x=r(42),b=a.TypeError,E=a.process,A=a.Promise,S="process"==f(E),O=function(){},T=o=_.f,U=!!function(){try{var e=A.resolve(1),t=(e.constructor={})[r(2)("species")]=function(e){e(O,O)};return(S||"function"==typeof PromiseRejectionEvent)&&e.then(O)instanceof t}catch(e){}}(),I=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},k=function(e,t){if(!e._n){e._n=!0;var r=e._c;y(function(){for(var n=e._v,o=1==e._s,i=0;r.length>i;)!function(t){var r,i,u=o?t.ok:t.fail,s=t.resolve,a=t.reject,c=t.domain;try{u?(o||(2==e._h&&C(e),e._h=1),!0===u?r=n:(c&&c.enter(),r=u(n),c&&c.exit()),r===t.promise?a(b("Promise-chain cycle")):(i=I(r))?i.call(r,s,a):s(r)):a(n)}catch(e){a(e)}}(r[i++]);e._c=[],e._n=!1,t&&!e._h&&j(e)})}},j=function(e){g.call(a,function(){var t,r,n,o=e._v,i=M(e);if(i&&(t=w(function(){S?E.emit("unhandledRejection",o,e):(r=a.onunhandledrejection)?r({promise:e,reason:o}):(n=a.console)&&n.error&&n.error("Unhandled promise rejection",o)}),e._h=S||M(e)?2:1),e._a=void 0,i&&t.e)throw t.v})},M=function(e){if(1==e._h)return!1;for(var t,r=e._a||e._c,n=0;r.length>n;)if(t=r[n++],t.fail||!M(t.promise))return!1;return!0},C=function(e){g.call(a,function(){var t;S?E.emit("rejectionHandled",e):(t=a.onrejectionhandled)&&t({promise:e,reason:e._v})})},P=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),k(t,!0))},R=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw b("Promise can't be resolved itself");(t=I(e))?y(function(){var n={_w:r,_d:!1};try{t.call(e,c(R,n,1),c(P,n,1))}catch(e){P.call(n,e)}}):(r._v=e,r._s=1,k(r,!1))}catch(e){P.call({_w:r,_d:!1},e)}}};U||(A=function(e){h(this,A,"Promise","_h"),p(e),n.call(this);try{e(c(R,this,1),c(P,this,1))}catch(e){P.call(this,e)}},n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=r(111)(A.prototype,{then:function(e,t){var r=T(m(this,A));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=S?E.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&k(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new n;this.promise=e,this.resolve=c(R,e,1),this.reject=c(P,e,1)},_.f=T=function(e){return e===A||e===u?new i(e):o(e)}),l(l.G+l.W+l.F*!U,{Promise:A}),r(27)(A,"Promise"),r(113)("Promise"),u=r(4).Promise,l(l.S+l.F*!U,"Promise",{reject:function(e){var t=T(this);return(0,t.reject)(e),t.promise}}),l(l.S+l.F*(s||!U),"Promise",{resolve:function(e){return x(s&&this===u?A:this,e)}}),l(l.S+l.F*!(U&&r(101)(function(e){A.all(e).catch(O)})),"Promise",{all:function(e){var t=this,r=T(t),n=r.resolve,o=r.reject,i=w(function(){var r=[],i=0,u=1;v(e,!1,function(e){var s=i++,a=!1;r.push(void 0),u++,t.resolve(e).then(function(e){a||(a=!0,r[s]=e,--u||n(r))},o)}),--u||n(r)});return i.e&&o(i.v),r.promise},race:function(e){var t=this,r=T(t),n=r.reject,o=w(function(){v(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return o.e&&n(o.v),r.promise}})},function(e,t,r){"use strict";var n=r(114)(!0);r(38)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},function(e,t,r){"use strict";var n=r(9),o=r(4),i=r(1),u=r(45),s=r(42);n(n.P+n.R,"Promise",{finally:function(e){var t=u(this,o.Promise||i.Promise),r="function"==typeof e;return this.then(r?function(r){return s(t,e()).then(function(){return r})}:e,r?function(r){return s(t,e()).then(function(){throw r})}:e)}})},function(e,t,r){"use strict";var n=r(9),o=r(26),i=r(41);n(n.S,"Promise",{try:function(e){var t=o.f(this),r=i(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},function(e,t,r){r(118);for(var n=r(1),o=r(10),i=r(13),u=r(2)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),a=0;a<s.length;a++){var c=s[a],f=n[c],l=f&&f.prototype;l&&!l[u]&&o(l,u,c),i[c]=i.Array}},function(e,t){function r(e,t){Error.call(this,t.message),Error.captureStackTrace(this,this.constructor),this.name="UnauthorizedError",this.message=t.message,this.code=e,this.status=401,this.inner=t}r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,e.exports=r},function(e,t,r){function n(e,t){var r="string"==typeof e&&e===t||e instanceof RegExp&&!!e.exec(t);return e instanceof RegExp&&(e.lastIndex=0),e&&e.url&&(r=n(e.url,t)),r}function o(e,t){return!e||(e=Array.isArray(e)?e:[e],!!~e.indexOf(t))}var i=r(53);e.exports=function(e){var t=this,r="function"==typeof e?{custom:e}:e;return r.useOriginalUrl=void 0===r.useOriginalUrl||r.useOriginalUrl,function(e,u,s){var a=i.parse((r.useOriginalUrl?e.originalUrl:e.url)||e.url||"",!0),c=!1;r.custom&&(c=c||r.custom(e));var f=!r.path||Array.isArray(r.path)?r.path:[r.path];f&&(c=c||f.some(function(t){return n(t,a.pathname)&&o(t.methods,e.method)}));var l=!r.ext||Array.isArray(r.ext)?r.ext:[r.ext];l&&(c=c||l.some(function(e){return a.pathname.substr(-1*e.length)===e}));var d=!r.method||Array.isArray(r.method)?r.method:[r.method];if(d&&(c=c||!!~d.indexOf(e.method)),c)return s();t(e,u,s)}}},function(e,t){e.exports={title:" Criipto Verify Administration",name:"auth0-criipto-verify-admin",version:"1.0.0",author:"auth0",useHashName:!1,description:"This extension manages connections to various national e-ID schemes via Criipto Verify.",type:"application",category:"end_user",logoUrl:"https://www.criipto.com/images/logo-criipto-dark-3.svg",initialUrlPath:"/",repository:"https://github.com/GreanTech/auth0-criipto-verify-extension",keywords:["auth0","extension","criipto","verify","nemid","bankid","digid"],auth0:{createClient:!0,scopes:"read:connections create:connections"}}},function(e,t){function r(e){this.message=e}function n(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new r("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,i,u=0,s=0,a="";i=t.charAt(s++);~i&&(n=u%4?64*n+i:i,u++%4)?a+=String.fromCharCode(255&n>>(-2*u&6)):0)i=o.indexOf(i);return a}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.name="InvalidCharacterError",e.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||n},function(e,t,r){function n(e){return decodeURIComponent(o(e).replace(/(.)/g,function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}var o=r(130);e.exports=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return n(t)}catch(e){return o(t)}}},function(e,t){function r(e,t){return null==e?void 0:e[t]}function n(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function o(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function i(){this.__data__=we?we(null):{}}function u(e){return this.has(e)&&delete this.__data__[e]}function s(e){var t=this.__data__;if(we){var r=t[e];return r===W?void 0:r}return he.call(t,e)?t[e]:void 0}function a(e){var t=this.__data__;return we?void 0!==t[e]:he.call(t,e)}function c(e,t){return this.__data__[e]=we&&void 0===t?W:t,this}function f(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function l(){this.__data__=[]}function d(e){var t=this.__data__,r=E(t,e);return!(r<0)&&(r==t.length-1?t.pop():ye.call(t,r,1),!0)}function p(e){var t=this.__data__,r=E(t,e);return r<0?void 0:t[r][1]}function h(e){return E(this.__data__,e)>-1}function v(e,t){var r=this.__data__,n=E(r,e);return n<0?r.push([e,t]):r[n][1]=t,this}function m(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function g(){this.__data__={hash:new o,map:new(_e||f),string:new o}}function y(e){return U(this,e).delete(e)}function _(e){return U(this,e).get(e)}function w(e){return U(this,e).has(e)}function x(e,t){return U(this,e).set(e,t),this}function b(e,t,r){var n=e[t];he.call(e,t)&&L(n,r)&&(void 0!==r||t in e)||(e[t]=r)}function E(e,t){for(var r=e.length;r--;)if(L(e[r][0],t))return r;return-1}function A(e){return!(!D(e)||C(e))&&(q(e)||n(e)?me:ne).test(R(e))}function S(e,t,r,n){if(!D(e))return e;t=j(t,e)?[t]:T(t);for(var o=-1,i=t.length,u=i-1,s=e;null!=s&&++o<i;){var a=P(t[o]),c=r;if(o!=u){var f=s[a];c=n?n(f,a,s):void 0,void 0===c&&(c=D(f)?f:k(t[o+1])?[]:{})}b(s,a,c),s=s[a]}return e}function O(e){if("string"==typeof e)return e;if(H(e))return be?be.call(e):"";var t=e+"";return"0"==t&&1/e==-$?"-0":t}function T(e){return Ae(e)?e:Ee(e)}function U(e,t){var r=e.__data__;return M(t)?r["string"==typeof t?"string":"hash"]:r.map}function I(e,t){var n=r(e,t);return A(n)?n:void 0}function k(e,t){return!!(t=null==t?G:t)&&("number"==typeof e||oe.test(e))&&e>-1&&e%1==0&&e<t}function j(e,t){if(Ae(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!H(e))||(Q.test(e)||!X.test(e)||null!=t&&e in Object(t))}function M(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function C(e){return!!de&&de in e}function P(e){if("string"==typeof e||H(e))return e;var t=e+"";return"0"==t&&1/e==-$?"-0":t}function R(e){if(null!=e){try{return pe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function N(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(z);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var u=e.apply(this,n);return r.cache=i.set(o,u),u};return r.cache=new(N.Cache||m),r}function L(e,t){return e===t||e!==e&&t!==t}function q(e){var t=D(e)?ve.call(e):"";return t==Y||t==K}function D(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function F(e){return!!e&&"object"==typeof e}function H(e){return"symbol"==typeof e||F(e)&&ve.call(e)==J}function V(e){return null==e?"":O(e)}function B(e,t,r){return null==e?e:S(e,t,r)}var z="Expected a function",W="__lodash_hash_undefined__",$=1/0,G=9007199254740991,Y="[object Function]",K="[object GeneratorFunction]",J="[object Symbol]",X=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,Z=/^\./,ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,te=/[\\^$.*+?()[\]{}|]/g,re=/\\(\\)?/g,ne=/^\[object .+?Constructor\]$/,oe=/^(?:0|[1-9]\d*)$/,ie="object"==typeof global&&global&&global.Object===Object&&global,ue="object"==typeof self&&self&&self.Object===Object&&self,se=ie||ue||Function("return this")(),ae=Array.prototype,ce=Function.prototype,fe=Object.prototype,le=se["__core-js_shared__"],de=function(){var e=/[^.]+$/.exec(le&&le.keys&&le.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),pe=ce.toString,he=fe.hasOwnProperty,ve=fe.toString,me=RegExp("^"+pe.call(he).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ge=se.Symbol,ye=ae.splice,_e=I(se,"Map"),we=I(Object,"create"),xe=ge?ge.prototype:void 0,be=xe?xe.toString:void 0;o.prototype.clear=i,o.prototype.delete=u,o.prototype.get=s,o.prototype.has=a,o.prototype.set=c,f.prototype.clear=l,f.prototype.delete=d,f.prototype.get=p,f.prototype.has=h,f.prototype.set=v,m.prototype.clear=g,m.prototype.delete=y,m.prototype.get=_,m.prototype.has=w,m.prototype.set=x;var Ee=N(function(e){e=V(e);var t=[];return Z.test(e)&&t.push(""),e.replace(ee,function(e,r,n,o){t.push(n?o.replace(re,"$1"):r||e)}),t});N.Cache=m;var Ae=Array.isArray;e.exports=B},function(e,t,r){function n(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function o(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}var i=r(153);e.exports=i(n),e.exports.strict=i(o),n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})})},function(e,t,r){var n=r(150);e.exports=function(e,t,r){var o={},i="SAFE_EVAL_"+Math.floor(1e6*Math.random());return o[i]={},e=i+"="+e,t&&Object.keys(t).forEach(function(e){o[e]=t[e]}),n.runInNewContext(e,o,r),o[i]}},function(e,t){function r(e){throw new Error("Cannot find module '"+e+"'.")}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=135},function(e,t){e.exports=require("async@2.1.2")},function(e,t){e.exports=require("auth0@2.4.0")},function(e,t){e.exports=require("body-parser@1.12.4")},function(e,t){e.exports=require("cookie-signature")},function(e,t){e.exports=require("crypto")},function(e,t){e.exports=require("ejs@2.3.1")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("jsonwebtoken@7.1.9")},function(e,t){e.exports=require("jwks-rsa@1.1.1")},function(e,t){e.exports=require("lru-memoizer@1.10.0")},function(e,t){e.exports=require("moment@2.11.2")},function(e,t){e.exports=require("morgan@1.5.3")},function(e,t){e.exports=require("request@2.67.0")},function(e,t){e.exports=require("superagent@1.2.0")},function(e,t){e.exports=require("vm")},function(e,t){e.exports=require("webtask-tools")},function(e,t){e.exports=require("winston@1.0.0")},function(e,t){e.exports=require("wrappy")}]);