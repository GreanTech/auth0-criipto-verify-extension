module.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=44)}([function(e,t){e.exports=require("auth0-extension-tools@1.2.1")},function(e,t){e.exports=require("express@4.14.0")},function(e,t,n){"use strict";var r=n(0).config(),o=n(4),i={CRIIPTO_VERIFY_CLIENT_ID:"aMnRpmOmyfTFzTuN1iWUmAIFgE0r16Hd",CRIIPTO_VERIFY_AUDIENCE:"urn:criipto:verify",CRIIPTO_VERIFY_AUTH0_DOMAIN:"grean.us.webtask.io/authorize-request-router",CRIIPTO_VERIFY_AUTH0_TOKEN_ISSUER:"https://grean.auth0.com/",CRIIPTO_VERIFY_DOMAIN:"api.grean.id",CRIIPTO_VERIFY_TLD:"criipto.id",VERIFY_GAUSS_APP_ID:"urn:grn:entityid:application:easyid",GAUSS_DOMAIN:"grean-api.greantech.com",AUTH0_RTA:"auth0.auth0.com",AUTH0_MANAGEMENT_DOMAIN:"manage.auth0.com"},a=function(e){var t=r(e);return"AUTH0_ISSUER_DOMAIN"!==e||t||(t=r("AUTH0_DOMAIN")),t||(t=i[e],o.info("Lookup in default values (key -> val)",e,t)),t};a.getValue=function(e){return r(e)},a.setValue=function(e,t){return r.setValue(e,t)},a.setProvider=function(e){return r.setProvider(e)},e.exports=a},function(e,t,n){const r=n(36),o=n(11),i=n(29),a=n(35);e.exports.createServer=r.createServer,e.exports.urlHelpers=o,e.exports.middlewares=i,e.exports.routes=a},function(e,t,n){"use strict";var r=n(93);r.emitErrs=!0;var o=new r.Logger({transports:[new r.transports.Console({timestamp:!0,level:"debug",handleExceptions:!0,json:!1,colorize:!0})],exitOnError:!1});e.exports=o,e.exports.stream={write:function(e){o.info(e.replace(/\n$/,""))}}},function(e,t,n){e.exports=!n(6)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports=require("lodash@3.10.1")},function(e,t){e.exports=require("url")},function(e,t,n){function r(e){if(!e.container)return null;const t=e.container.replace(u,"\\$&"),n=e.jtn?e.jtn.replace(u,"\\$&"):"";if(e.url_format===s)return new RegExp("^/api/run/"+t+"/(?:"+n+"/?)?");if(e.url_format===a)return new RegExp("^/"+t+"/(?:"+n+"/?)?");if(e.url_format===i)return new RegExp("^/(?:"+n+"/?)?");throw new Error("Unsupported webtask URL format.")}const o=n(10),i=3,a=2,s=1,u=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,c=function(e,t){var n=o.parse(e).pathname||"";return n=n.replace(t,"").replace(/^\/|\/$/g,""),n.startsWith("/")||(n="/"+n),n.endsWith("/")||(n+="/"),n};e.exports.getBasePath=function(e){return c(e.originalUrl||"",e.path)},e.exports.getBaseUrl=function(e,t){var n=t;const r=o.parse(e.originalUrl||"").pathname||"";return o.format({protocol:n||"https",host:e.headers.host,pathname:r.replace(e.path,"").replace(/\/$/g,"")})},e.exports.getWebtaskUrl=function(e){const t=r(e.x_wt),n=e.url,i=e.url.replace(t,"/"),a=o.parse(i||"").pathname,s=o.parse(n||"").pathname||"";var u=o.format({protocol:"https",host:e.headers.host,pathname:s.replace(a,"").replace(/\/$/g,"")});return e.x_wt&&(0===u.indexOf("https://sandbox.it.auth0.com")?u=u.replace("https://sandbox.it.auth0.com/api/run/"+e.x_wt.container+"/","https://"+e.x_wt.container+".us.webtask.io/"):0===u.indexOf("https://sandbox-eu.it.auth0.com")?u=u.replace("https://sandbox-eu.it.auth0.com/api/run/"+e.x_wt.container+"/","https://"+e.x_wt.container+".eu.webtask.io/"):0===u.indexOf("https://sandbox-au.it.auth0.com")&&(u=u.replace("https://sandbox-au.it.auth0.com/api/run/"+e.x_wt.container+"/","https://"+e.x_wt.container+".au.webtask.io/"))),u}},function(e,t,n){"use strict";var r=n(80);e.exports=function(e,t,n){return function(o,i,a){var s=r(a);return!0===e||"function"==typeof e&&e(o,i,s)?t(o,i,s):n?n(o,i,s):s()}}},function(e,t,n){"use strict";e.exports={ID_SERVICE_PROFILES:{"auth0-criipto-verify-admin-dk-nemid":{displayName:"Danish NemID",logo:"https://rawgit.com/GreanTech/auth0-criipto-verify-extension/master/logos/dknemid/NEMID_BLACK.svg",acrValues:["urn:grn:authn:dk:nemid:poces","urn:grn:authn:dk:nemid:moces","urn:grn:authn:dk:nemid:moces:codefile"],subpath:"dknemid",description:"This extension manages connections to Danish NemID via Criipto Verify."},"auth0-criipto-verify-admin-se-bankid":{displayName:"Swedish BankID",logo:"https://rawgit.com/GreanTech/auth0-criipto-verify-extension/master/logos/sebankid/bankid_high_rgb.png",acrValues:["urn:grn:authn:se:bankid:same-device","urn:grn:authn:se:bankid:another-device"],subpath:"sebankid",description:"This extension manages connections to Swedish BankID via Criipto Verify."},"auth0-criipto-verify-admin-no-bankid":{displayName:"Norwegian BankID",logo:"https://rawgit.com/GreanTech/auth0-criipto-verify-extension/master/logos/nobankid/bankID_Negativ_Blaabakgrunn_Logo_RGB.png",acrValues:["urn:grn:authn:no:bankid:central","urn:grn:authn:no:bankid:mobile"],subpath:"nobankid",description:"This extension manages connections to Norwegian BankID via Criipto Verify."},"auth0-criipto-verify-admin-nl-digid":{displayName:"Dutch DigiD",logo:"https://www.criipto.com/images/logo-e-id-nl-digid.svg",acrValues:["urn:grn:authn:nl:digid:basic","urn:grn:authn:nl:digid:middle","urn:grn:authn:nl:digid:substantial","urn:grn:authn:nl:digid:high"],subpath:"nldigid",description:"This extension manages connections to Dutch DigiD via Criipto Verify."},"auth0-criipto-verify-admin":{displayName:"",logo:"https://www.criipto.com/images/logo-criipto-dark-3.svg",acrValues:["urn:grn:authn:dk:nemid:poces","urn:grn:authn:dk:nemid:moces","urn:grn:authn:dk:nemid:moces:codefile","urn:grn:authn:se:bankid:same-device","urn:grn:authn:se:bankid:another-device","urn:grn:authn:no:bankid:central","urn:grn:authn:no:bankid:mobile","urn:grn:authn:nl:digid:basic","urn:grn:authn:nl:digid:middle","urn:grn:authn:nl:digid:substantial","urn:grn:authn:nl:digid:high"],subpath:"all",description:"This extension manages various e-ID connections via Criipto Verify."}}}},function(e,t,n){"use strict";var r=n(2);e.exports={name:function(e){return e.webtaskContext?e.webtaskContext.meta["auth0-extension-name"]:r("AUTH0-EXTENSION-NAME")}}},function(e,t,n){e.exports={default:n(48),__esModule:!0}},function(e,t){var n=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(52);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(18),o=n(17);e.exports=function(e){return r(o(e))}},function(e,t,n){function r(e){return e&&"[object Function]"==f.call(e)}function o(e){return function(t,n,r){return r(null,e)}}var i=n(87),a=n(75),s=n(76),u=n(81),c=n(79),l=function(e,t,n){return n(null,!1)},f={}.toString;e.exports=function(e){if(!e||!e.secret)throw new Error("secret should be set");var t=e.secret;r(t)||(t=o(t));var n=e.isRevoked||l,f=e.userProperty||e.requestProperty||"user",d=void 0===e.credentialsRequired||e.credentialsRequired,p=function(r,o,s){var l;if("OPTIONS"===r.method&&r.headers.hasOwnProperty("access-control-request-headers")){if(!!~r.headers["access-control-request-headers"].split(",").map(function(e){return e.trim()}).indexOf("authorization"))return s()}if(void 0!==e.skip&&(console.warn("WARN: express-jwt: options.skip is deprecated"),console.warn("WARN: use app.use(jwt(options).unless({path: '/x'}))"),e.skip.indexOf(r.url)>-1))return s();if(e.getToken&&"function"==typeof e.getToken)try{l=e.getToken(r)}catch(e){return s(e)}else if(r.headers&&r.headers.authorization){var p=r.headers.authorization.split(" ");if(2!=p.length)return s(new a("credentials_bad_format",{message:"Format is Authorization: Bearer [token]"}));var h=p[0],g=p[1];if(!/^Bearer$/i.test(h))return s(new a("credentials_bad_scheme",{message:"Format is Authorization: Bearer [token]"}));l=g}if(!l)return d?s(new a("credentials_required",{message:"No authorization token was found"})):s();var v=i.decode(l,{complete:!0})||{};u.waterfall([function(e){4==t.length?t(r,v.header,v.payload,e):t(r,v.payload,e)},function(t,n){i.verify(l,t,e,function(e,t){e&&d?n(new a("invalid_token",e)):n(null,t)})},function(e,t){n(r,v.payload,function(n,r){n?t(n):r?t(new a("revoked_token",{message:"The token has been revoked."})):t(null,e)})}],function(e,t){if(e)return s(e);c(r,f,t),s()})};return p.unless=s,p}},function(e,t){e.exports={title:"Criipto Verify Administration",name:"auth0-criipto-verify-admin",version:"1.3.0",author:"auth0",useHashName:!1,description:"This extension manages connections to various national e-ID schemes via Criipto Verify.",type:"application",logoUrl:"https://www.criipto.com/images/logo-criipto-dark-3.svg",initialUrlPath:"/admins/login",repository:"https://github.com/GreanTech/auth0-criipto-verify-extension",keywords:["auth0","extension","criipto","verify","nemid","bankid","digid"],auth0:{createClient:!0,scopes:"read:connections create:connections update:connections read:clients",onInstallPath:"/.extensions/on-install"}}},function(e,t,n){"use strict";var r=n(78);e.exports=function(e,t){if("string"!=typeof e)throw new Error("Invalid token specified");t=t||{};var n=!0===t.header?0:1;return JSON.parse(r(e.split(".")[n]))}},function(e,t){e.exports=require("path")},function(e,t,n){"use strict";(function(t){function r(e){return e&&e.__esModule?e:{default:e}}var o=n(24),i=r(o),a=n(90),s=r(a),u=n(1),c=r(u),l=n(82),f=r(l),d=n(0),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(d),h=n(3),g=n(41),v=r(g),m=n(38),y=r(m),_=n(43),w=r(_),x=n(42),b=r(x),E=n(2),I=r(E),T=n(4),A=r(T);e.exports=function(e,n){I.default.setProvider(e);var r=n?new p.WebtaskStorageContext(n,{force:1}):new p.FileStorageContext(i.default.join(t,"./data.json"),{mergeWrites:!0}),o=new c.default;return o.use(function(e,t,n){e.webtaskContext&&I.default.setProvider(p.configProvider.fromWebtaskContext(e.webtaskContext)),n()}),o.use((0,s.default)(":method :url :status :response-time ms - :res[content-length]",{stream:A.default.stream})),o.use(f.default.json()),o.use(f.default.urlencoded({extended:!1})),o.use(h.routes.dashboardAdmins({secret:(0,I.default)("EXTENSION_SECRET"),audience:"urn:criipto-verify",rta:(0,I.default)("AUTH0_RTA").replace("https://",""),domain:(0,I.default)("AUTH0_ISSUER_DOMAIN"),baseUrl:(0,I.default)("PUBLIC_WT_URL"),webtaskUrl:(0,I.default)("PUBLIC_WT_URL"),clientName:"Criipto Verify Administration",urlPrefix:"/admins",sessionStorageKey:"delegated-admin:apiToken",scopes:"read:connections create:connections update:connections read:clients"})),o.use("/api",(0,y.default)(r)),o.use("/app",c.default.static(i.default.join(t,"../dist"))),o.use("/meta",(0,w.default)()),o.use("/.extensions",(0,v.default)(r)),o.get("*",(0,b.default)(r)),o.use(h.middlewares.errorHandler(A.default.error)),o}}).call(t,"/")},function(e,t,n){const r=n(23),o=n(21),i=n(0),a=n(12);e.exports=function(e){if(!e||"object"!=typeof e)throw new i.ArgumentError("Must provide the options");if(null===e.secret||void 0===e.secret)throw new i.ArgumentError("Must provide a valid secret");if("string"!=typeof e.secret||0===e.secret.length)throw new i.ArgumentError("The provided secret is invalid: "+e.secret);if(null===e.audience||void 0===e.audience)throw new i.ArgumentError("Must provide a valid secret");if("string"!=typeof e.audience||0===e.audience.length)throw new i.ArgumentError("The provided audience is invalid: "+e.audience);if(null===e.baseUrl||void 0===e.baseUrl)throw new i.ArgumentError("Must provide a valid base URL");if("string"!=typeof e.baseUrl||0===e.baseUrl.length)throw new i.ArgumentError("The provided base URL is invalid: "+e.baseUrl);const t=o({audience:e.audience,issuer:e.baseUrl,secret:e.secret,algorithms:["HS256"],credentialsRequired:e.credentialsRequired||!0});return function(n,r,o){t(n,r,function(t){return t?o(t):e.onLoginSuccess?e.onLoginSuccess(n,r,o):o()})}},e.exports.optional=function(t){const n=e.exports(t);return a(function(e){if(e&&e.headers&&e.headers.authorization&&0===e.headers.authorization.indexOf("Bearer "))try{const n=r(e.headers.authorization.split(" ")[1]);return n&&n.iss===t.baseUrl}catch(e){return!1}return!1},n)}},function(e,t,n){const r=n(23),o=n(21),i=n(88),a=n(0),s=n(12),u=n(0).UnauthorizedError;e.exports=function(e){if(!e||"object"!=typeof e)throw new a.ArgumentError("Must provide the options");if(null===e.domain||void 0===e.domain)throw new a.ArgumentError("Must provide a valid domain");if("string"!=typeof e.domain||0===e.domain.length)throw new a.ArgumentError("The provided domain is invalid: "+e.domain);if(null===e.audience||void 0===e.audience)throw new a.ArgumentError("Must provide a valid audience");if("string"!=typeof e.audience||0===e.audience.length)throw new a.ArgumentError("The provided audience is invalid: "+e.audience);const t=o({secret:i.expressJwtSecret({cache:!0,rateLimit:!0,jwksRequestsPerMinute:5,jwksUri:"https://"+e.domain+"/.well-known/jwks.json",handleSigningKeyError:function(e,t){return t(e instanceof i.SigningKeyNotFoundError?new u("A token was provided with an invalid kid"):e)}}),audience:e.audience,issuer:"https://"+e.domain+"/",algorithms:["RS256"],credentialsRequired:e&&e.credentialsRequired||!0});return function(n,r,o){t(n,r,function(t){return t?o(t):e.onLoginSuccess?e.onLoginSuccess(n,r,o):o()})}},e.exports.optional=function(t){const n=e.exports(t);return s(function(e){if(e&&e.headers&&e.headers.authorization&&0===e.headers.authorization.indexOf("Bearer "))try{const n=r(e.headers.authorization.split(" ")[1]);return n&&n.iss==="https://"+t.domain+"/"}catch(e){return!1}return!1},n)}},function(e,t,n){e.exports=function(e){return function(t,n,r,o){return e&&e(t),t&&t.status?(r.status(t.status),r.json({error:t.code||t.name,message:t.message||t.name})):(r.status(t.status||500),r.json({error:"InternalServerError",message:t.message||t.name}))}}},function(e,t,n){e.exports.authenticateAdmins=n(26),e.exports.authenticateUsers=n(27),e.exports.requireAuthentication=n(31),e.exports.errorHandler=n(28),e.exports.managementApiClient=n(30),e.exports.validateHookToken=n(32),e.exports.webtaskConfig=n(33)},function(e,t,n){const r=n(0);e.exports=function(e){return function(t,n,o){const i=t,a=t.user&&t.user.access_token&&t.user.access_token.length,s=a?{domain:e.domain,accessToken:t.user.access_token}:e;r.managementApi.getClient(s).then(function(e){return i.auth0=e,o(),null}).catch(function(e){o(e)})}}},function(e,t,n){const r=n(0).UnauthorizedError;e.exports=function(e,t,n){return e.user?n():n(new r("Authentication required for this endpoint."))}},function(e,t,n){const r=n(0);e.exports=function(e,t,n){if(null===e||void 0===e)throw new r.ArgumentError("Must provide the domain");if("string"!=typeof e||0===e.length)throw new r.ArgumentError("The provided domain is invalid: "+e);if(null===t||void 0===t)throw new r.ArgumentError("Must provide the webtaskUrl");if("string"!=typeof t||0===t.length)throw new r.ArgumentError("The provided webtaskUrl is invalid: "+t);if(null===n||void 0===n)throw new r.ArgumentError("Must provide the extensionSecret");if("string"!=typeof n||0===n.length)throw new r.ArgumentError("The provided extensionSecret is invalid: "+n);return function(o){if(null===o||void 0===o)throw new r.ArgumentError("Must provide the hookPath");if("string"!=typeof o||0===o.length)throw new r.ArgumentError("The provided hookPath is invalid: "+o);return function(i,a,s){if(i.headers.authorization&&"Bearer"===i.headers.authorization.split(" ")[0]){const u=i.headers.authorization.split(" ")[1];try{if(r.validateHookToken(e,t,o,n,u))return s()}catch(e){return s(e)}}return s(new r.HookTokenError("Hook token missing for the call to: "+o))}}}},function(e,t,n){const r=n(0);e.exports=function(e){return function(t,n,o){return t.webtaskContext&&e.setProvider(r.configProvider.fromWebtaskContext(t.webtaskContext)),o()}}},function(e,t,n){const r=n(1),o=n(84),i=n(46),a=n(0),s=n(11);e.exports=function(e){if(!e||"object"!=typeof e)throw new a.ArgumentError("Must provide the options");if(null===e.secret||void 0===e.secret)throw new a.ArgumentError("Must provide a valid secret");if("string"!=typeof e.secret||0===e.secret.length)throw new a.ArgumentError("The provided secret is invalid: "+e.secret);if(null===e.audience||void 0===e.audience)throw new a.ArgumentError("Must provide a valid secret");if("string"!=typeof e.audience||0===e.audience.length)throw new a.ArgumentError("The provided audience is invalid: "+e.audience);if(null===e.rta||void 0===e.rta)throw new a.ArgumentError("Must provide a valid rta");if("string"!=typeof e.rta||0===e.rta.length)throw new a.ArgumentError("The provided rta is invalid: "+e.rta);if(null===e.domain||void 0===e.domain)throw new a.ArgumentError("Must provide a valid domain");if("string"!=typeof e.domain||0===e.domain.length)throw new a.ArgumentError("The provided domain is invalid: "+e.domain);if(null===e.baseUrl||void 0===e.baseUrl)throw new a.ArgumentError("Must provide a valid base URL");if("string"!=typeof e.baseUrl||0===e.baseUrl.length)throw new a.ArgumentError("The provided base URL is invalid: "+e.baseUrl);if(null===e.clientName||void 0===e.clientName)throw new a.ArgumentError("Must provide a valid client name");if("string"!=typeof e.clientName||0===e.clientName.length)throw new a.ArgumentError("The provided client name is invalid: "+e.clientName);const t=e.stateKey||"state",n=e.urlPrefix||"",u=e.sessionStorageKey||"apiToken",c=r.Router();return c.get(n+"/login",function(r,i){const u=o.randomBytes(16).toString("hex");i.cookie(t,u);const c=new a.SessionManager(e.rta,e.domain,e.baseUrl),l=c.createAuthorizeUrl({redirectUri:s.getBaseUrl(r)+n+"/login/callback",scopes:e.scopes,expiration:e.expiration});i.redirect(l+"&state="+u)}),c.post(n+"/login/callback",i(),function(n,r,o){return n.cookies&&n.cookies[t]===n.body.state?new a.SessionManager(e.rta,e.domain,e.baseUrl).create(n.body.id_token,n.body.access_token,{secret:e.secret,issuer:e.baseUrl,audience:e.audience}).then(function(e){r.header("Content-Type","text/html"),r.status(200).send('<html><head><script type="text/javascript">sessionStorage.setItem("'+u+'", "'+e+'");window.location.href = "'+s.getBaseUrl(n)+'";<\/script></head></html>')}).catch(function(e){o(e)}):o(new a.ValidationError("Login failed. State mismatch."))}),c.get(n+"/logout",function(t,n){const r=encodeURIComponent(s.getBaseUrl(t));n.header("Content-Type","text/html"),n.status(200).send('<html><head><script type="text/javascript">sessionStorage.removeItem("'+u+'");window.location.href = "https://'+e.rta+"/v2/logout/?returnTo="+r+"&client_id="+r+'";<\/script></head></html>')}),c.get("/.well-known/oauth2-client-configuration",function(t,r){r.header("Content-Type","application/json"),r.status(200).send({redirect_uris:[s.getBaseUrl(t)+n+"/login/callback"],client_name:e.clientName,post_logout_redirect_uris:[s.getBaseUrl(t)]})}),c}},function(e,t,n){e.exports.dashboardAdmins=n(34)},function(e,t,n){const r=n(0),o=n(92);e.exports.createServer=function(e){const t=r.createServer(e);var n=null;return o.fromExpress(function(e,r){return n||(n=t(e.webtaskContext)),n(e,r)})}},function(e,t,n){"use strict";e.exports=function(e,t){var n="https://raw.githubusercontent.com/GreanTech/auth0-criipto-verify-extension/master/build/"+t.subpath;return{title:"Criipto Verify - "+t.displayName,name:e,logoUrl:t.logo,repository:n,codeUrl:n+"/build/bundle.js",description:t.description}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(9),a=(r(i),n(89)),s=(r(a),n(3)),u=n(0),c=(r(u),n(2)),l=r(c),f=n(40),d=r(f),p=n(39),h=r(p);t.default=function(e){var t=s.middlewares.managementApiClient({domain:(0,l.default)("AUTH0_ISSUER_DOMAIN"),clientId:(0,l.default)("AUTH0_CLIENT_ID"),clientSecret:(0,l.default)("AUTH0_CLIENT_SECRET")}),n=(0,o.Router)();return n.use(s.middlewares.authenticateAdmins({credentialsRequired:!1,secret:(0,l.default)("EXTENSION_SECRET"),audience:"urn:criipto-verify",baseUrl:(0,l.default)("PUBLIC_WT_URL")})),n.use(function(e,t,n){t.setHeader("Cache-control","no-cache, no-store"),t.setHeader("Pragma","no-cache"),t.setHeader("Expires","0"),n()}),n.use("/connections",t,(0,d.default)(e)),n.use("/clients",t,(0,h.default)()),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(9),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=function(){var e=(0,r.Router)();return e.get("/",function(e,t,n){e.auth0.clients.getAll().then(function(e){return i.default.filter(e,function(e){return!e.global})}).then(function(e){return t.json(e)}).catch(n)}),e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(9),i=r(o),a=n(1),s=n(10),u=r(s);t.default=function(e){var t=(0,a.Router)();return t.post("/search",function(e,t,n){var r=e.body.registeredTenants,o=i.default.flatten(i.default.map(r,function(e){return i.default.flatten(i.default.map(e.domains,function(e){return e.name}))}));e.auth0.connections.getAll().then(function(e){return e.filter(function(e){return"adfs"===e.strategy&&e.options&&e.options.adfs_server}).filter(function(e){var t=u.default.parse(e.options.adfs_server);return i.default.indexOf(o,t.hostname)>-1})}).then(function(e){return t.json(e)}).catch(n)}),t.patch("/:id",function(e,t,n){e.auth0.connections.update({id:e.params.id},{enabled_clients:e.body.enabled_clients}).then(function(){return t.status(204).send()}).catch(n)}),t.post("/",function(e,t,n){var r=i.default.assign({},e.body,{strategy:"adfs"});e.auth0.connections.getAll().then(function(e){var t=e.find(function(e){return e.name===r.name&&"adfs"===e.strategy}),n=r.options.adfs_server;if(console.info(t),t&&t.options.adfs_server!==n){var o="An ADFS connection with name "+r.name+" already exists, but points to another server ("+t.options.adfs_server+") than the specified one ("+n+"). If the current value is incorrect, you can change it from Auth0's management UI (Connections -> Enterprise -> ADFS -> 'Settings' cog for "+r.name+")";throw Error(o)}}).then(function(){return e.auth0.connections.create(r).then(function(){return t.status(204).send()})}).catch(n)}),t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(3),a=n(2),s=r(a),u=n(4),c=r(u),l=n(91),f=r(l);t.default=function(e){var t=i.middlewares.validateHookToken((0,s.default)("AUTH0_ISSUER_DOMAIN"),(0,s.default)("WT_URL"),(0,s.default)("EXTENSION_SECRET")),n=(0,o.Router)();return n.use("/on-install",t("/.extensions/on-install")),n.post("/on-install",function(t,n){c.default.info("Install hook running. "),e.read().then(function(t){var r=t||{},o=r.gaussEntityId;if(o)c.default.info("Found existing Gauss entityIdentifier",o),n.sendStatus(204);else{var i=f.default.v4();r.gaussEntityId="urn:grn:entityid:organization:verify:auth0:"+i,c.default.info("Generated new Gauss entityIdentifier",r.gaussEntityId),e.write(r).then(function(){n.sendStatus(204)})}}).catch(function(e){c.default.debug("Error deploying resources for the Criipto Verify extension."),c.default.error(e),n.sendStatus(400)})}),n}},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(45),i=(r(o),n(86)),a=(r(i),n(85)),s=r(a),u=n(24),c=(r(u),n(3)),l=n(2),f=r(l),d=n(22),p=(r(d),n(13)),h=n(14);t.default=function(e){var t='\n    <!DOCTYPE html>\n    <html lang="en">\n    <head>\n      <title><%= config.TITLE %></title>\n      <meta charset="UTF-8" />\n      <meta http-equiv="X-UA-Compatible" content="IE=Edge" />\n      <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n      <link rel="shortcut icon" href="https://cdn.auth0.com/styleguide/4.6.13/lib/logos/img/favicon.png">\n      <meta name="viewport" content="width=device-width, initial-scale=1">\n      <link rel="stylesheet" type="text/css" href="https://cdn.auth0.com/styles/zocial.min.css" />\n      <link rel="stylesheet" type="text/css" href="https://cdn.auth0.com/manage/v0.3.1672/css/index.min.css" />\n      <link rel="stylesheet" type="text/css" href="https://cdn.auth0.com/styleguide/4.6.13/index.min.css" />\n      <% if (assets.style) { %><link rel="stylesheet" type="text/css" href="/app/<%= assets.style %>" /><% } %>\n      <% if (assets.customCss) { %><link rel="stylesheet" type="text/css" href="<%= assets.customCss %>" /><% } %>\n    </head>\n    <body>\n      <div id="app"></div>\n      <script src="https://cdn.auth0.com/js/auth0/9.4.2/auth0.min.js"><\/script>\n      <script type="text/javascript" src="//cdn.auth0.com/manage/v0.3.1672/js/bundle.js"><\/script>\n      <script type="text/javascript">window.config = <%- JSON.stringify(config) %>;<\/script>\n      <% if (assets.vendors) { %><script type="text/javascript" src="/app/<%= assets.vendors %>"><\/script><% } %>\n      <% if (assets.app) { %><script type="text/javascript" src="/app/<%= assets.app %>"><\/script><% } %>\n      <% if (assets.version) { %>\n      <link rel="stylesheet" type="text/css" href="<%= assets.cdnPath %>/auth0-criipto-verify-admin.ui.<%= assets.version %>.css" />\n      <script type="text/javascript" src="<%= assets.cdnPath %>/auth0-criipto-verify-admin.ui.vendors.<%= assets.version %>.js"><\/script>\n      <script type="text/javascript" src="<%= assets.cdnPath %>/auth0-criipto-verify-admin.ui.<%= assets.version %>.js"><\/script>\n      <% } %>\n    </body>\n    </html>\n    ';return function(n,r,o){return 0===n.url.indexOf("/api")?o():e.read().then(function(e){var o=h.name(n),i=p.ID_SERVICE_PROFILES[o],a=(c.urlHelpers.getBasePath(n)||"").replace(/\/$/,""),u={CRIIPTO_VERIFY_AUTH0_DOMAIN:(0,f.default)("CRIIPTO_VERIFY_AUTH0_DOMAIN"),CRIIPTO_VERIFY_CLIENT_ID:(0,f.default)("CRIIPTO_VERIFY_CLIENT_ID"),CRIIPTO_VERIFY_AUDIENCE:(0,f.default)("CRIIPTO_VERIFY_AUDIENCE"),CRIIPTO_VERIFY_AUTH0_TOKEN_ISSUER:(0,f.default)("CRIIPTO_VERIFY_AUTH0_TOKEN_ISSUER"),EXTEND_URL:(0,f.default)("EXTEND_URL"),BASE_URL:(0,f.default)("GALLERY_WT_URL")||c.urlHelpers.getBaseUrl(n),BASE_PATH:a,TITLE:(0,f.default)("TITLE"),FEDERATED_LOGOUT:"true"===(0,f.default)("FEDERATED_LOGOUT"),VERIFY_API_ROOT:"https://"+(0,f.default)("CRIIPTO_VERIFY_DOMAIN"),GAUSS_API_ROOT:"https://"+(0,f.default)("GAUSS_DOMAIN"),VERIFY_GAUSS_APP_ID:(0,f.default)("VERIFY_GAUSS_APP_ID"),AUTH0_DOMAIN:(0,f.default)("AUTH0_DOMAIN"),AUTH0_MANAGEMENT_DOMAIN:(0,f.default)("AUTH0_MANAGEMENT_DOMAIN"),CRIIPTO_VERIFY_TLD:(0,f.default)("CRIIPTO_VERIFY_TLD"),CRIIPTO_VERIFY_AUTHMETHOD_NAME:i.displayName,CRIIPTO_VERIFY_AUTHMETHOD_LOGO:i.logo,CRIIPTO_VERIFY_AUTHMETHODS:i.acrValues,GAUSS_ENTITY_ID:e.gaussEntityId},l=(0,f.default)("CDN_PATH")||"https://rawgit.com/GreanTech/auth0-criipto-verify-extension/master/dist";return r.send(s.default.render(t,{config:u,assets:{customCss:(0,f.default)("CUSTOM_CSS"),version:"1.3.0",cdnPath:l}}))})}}}).call(t,"/")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(15),i=r(o),a=n(1),s=r(a),u=n(22),c=r(u),l=n(14),f=r(l),d=n(13),p=r(d),h=n(37),g=r(h);t.default=function(){var e=s.default.Router();return e.get("/",function(e,t){var n=f.default.name(e),r=p.default.ID_SERVICE_PROFILES[n],o=(0,g.default)(n,r),a=(0,i.default)({},c.default,o);console.log("req.webtaskContext",e.webtaskContext),t.status(200).send(a)}),e}},function(e,t,n){"use strict";var r=n(3),o=n(25),i=n(2),a=n(4),s=r.createServer(function(e,t){return a.info("Starting Criipto Verify Admin Extension - Version:","1.3.0"),o(e,t)});e.exports=function(e,t,n){var o=r.urlHelpers.getWebtaskUrl(t);o.endsWith("/")||(o+="/"),i.setValue("PUBLIC_WT_URL",o),s(e,t,n)}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(15),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=o.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){"use strict";function r(e,t){return function(n,r,o){if(n.cookies)return o();var a=n.headers.cookie,c=!e||Array.isArray(e)?e||[]:[e];if(n.secret=c[0],n.cookies=Object.create(null),n.signedCookies=Object.create(null),!a)return o();n.cookies=u.parse(a,t),0!==c.length&&(n.signedCookies=s(n.cookies,c),n.signedCookies=i(n.signedCookies)),n.cookies=i(n.cookies),o()}}function o(e){if("string"==typeof e&&"j:"===e.substr(0,2))try{return JSON.parse(e.slice(2))}catch(e){return}}function i(e){for(var t,n,r=Object.keys(e),i=0;i<r.length;i++)t=r[i],(n=o(e[t]))&&(e[t]=n);return e}function a(e,t){if("string"==typeof e){if("s:"!==e.substr(0,2))return e;for(var n=!t||Array.isArray(t)?t||[]:[t],r=0;r<n.length;r++){var o=c.unsign(e.slice(2),n[r]);if(!1!==o)return o}return!1}}function s(e,t){for(var n,r,o,i=Object.keys(e),s=Object.create(null),u=0;u<i.length;u++)r=i[u],o=e[r],n=a(o,t),o!==n&&(s[r]=n,delete e[r]);return s}var u=n(47),c=n(83);e.exports=r,e.exports.JSONCookie=o,e.exports.JSONCookies=i,e.exports.signedCookie=a,e.exports.signedCookies=s},function(e,t,n){"use strict";function r(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var n={},r=t||{},o=e.split(u),s=r.decode||a,c=0;c<o.length;c++){var l=o[c],f=l.indexOf("=");if(!(f<0)){var d=l.substr(0,f).trim(),p=l.substr(++f,l.length).trim();'"'==p[0]&&(p=p.slice(1,-1)),void 0==n[d]&&(n[d]=i(p,s))}}return n}function o(e,t,n){var r=n||{},o=r.encode||s;if("function"!=typeof o)throw new TypeError("option encode is invalid");if(!c.test(e))throw new TypeError("argument name is invalid");var i=o(t);if(i&&!c.test(i))throw new TypeError("argument val is invalid");var a=e+"="+i;if(null!=r.maxAge){var u=r.maxAge-0;if(isNaN(u))throw new Error("maxAge should be a Number");a+="; Max-Age="+Math.floor(u)}if(r.domain){if(!c.test(r.domain))throw new TypeError("option domain is invalid");a+="; Domain="+r.domain}if(r.path){if(!c.test(r.path))throw new TypeError("option path is invalid");a+="; Path="+r.path}if(r.expires){if("function"!=typeof r.expires.toUTCString)throw new TypeError("option expires is invalid");a+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(a+="; HttpOnly"),r.secure&&(a+="; Secure"),r.sameSite){switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return a}function i(e,t){try{return t(e)}catch(t){return e}}t.parse=r,t.serialize=o;var a=decodeURIComponent,s=encodeURIComponent,u=/; */,c=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},function(e,t,n){n(74),e.exports=n(16).Object.assign},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(8);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){var r=n(20),o=n(70),i=n(69);e.exports=function(e){return function(t,n,a){var s,u=r(t),c=o(u.length),l=i(a,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(49);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(8),o=n(7).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(7),o=n(16),i=n(53),a=n(58),s=function(e,t,n){var u,c,l,f=e&s.F,d=e&s.G,p=e&s.S,h=e&s.P,g=e&s.B,v=e&s.W,m=d?o:o[t]||(o[t]={}),y=m.prototype,_=d?r:p?r[t]:(r[t]||{}).prototype;d&&(n=t);for(u in n)(c=!f&&_&&void 0!==_[u])&&u in m||(l=c?_[u]:n[u],m[u]=d&&"function"!=typeof _[u]?n[u]:g&&c?i(l,r):v&&_[u]==l?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):h&&"function"==typeof l?i(Function.call,l):l,h&&((m.virtual||(m.virtual={}))[u]=l,e&s.R&&y&&!y[u]&&a(y,u,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(61),o=n(66);e.exports=n(5)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){e.exports=!n(5)&&!n(6)(function(){return 7!=Object.defineProperty(n(54)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){"use strict";var r=n(64),o=n(62),i=n(65),a=n(71),s=n(18),u=Object.assign;e.exports=!u||n(6)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r})?function(e,t){for(var n=a(e),u=arguments.length,c=1,l=o.f,f=i.f;u>c;)for(var d,p=s(arguments[c++]),h=l?r(p).concat(l(p)):r(p),g=h.length,v=0;g>v;)f.call(p,d=h[v++])&&(n[d]=p[d]);return n}:u},function(e,t,n){var r=n(50),o=n(59),i=n(72),a=Object.defineProperty;t.f=n(5)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(57),o=n(20),i=n(51)(!1),a=n(67)("IE_PROTO");e.exports=function(e,t){var n,s=o(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~i(c,n)||c.push(n));return c}},function(e,t,n){var r=n(63),o=n(55);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(68)("keys"),o=n(73);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t,n){var r=n(7),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t,n){var r=n(19),o=Math.max,i=Math.min;e.exports=function(e,t){return e=r(e),e<0?o(e+t,0):i(e,t)}},function(e,t,n){var r=n(19),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){var r=n(17);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(8);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(56);r(r.S+r.F,"Object",{assign:n(60)})},function(e,t){function n(e,t){Error.call(this,t.message),Error.captureStackTrace(this,this.constructor),this.name="UnauthorizedError",this.message=t.message,this.code=e,this.status=401,this.inner=t}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,e.exports=n},function(e,t,n){function r(e,t){var n="string"==typeof e&&e===t||e instanceof RegExp&&!!e.exec(t);return e instanceof RegExp&&(e.lastIndex=0),e&&e.url&&(n=r(e.url,t)),n}function o(e,t){return!e||(e=Array.isArray(e)?e:[e],!!~e.indexOf(t))}var i=n(10);e.exports=function(e){var t=this,n="function"==typeof e?{custom:e}:e;return n.useOriginalUrl=void 0===n.useOriginalUrl||n.useOriginalUrl,function(e,a,s){var u=i.parse((n.useOriginalUrl?e.originalUrl:e.url)||e.url||"",!0),c=!1;n.custom&&(c=c||n.custom(e));var l=!n.path||Array.isArray(n.path)?n.path:[n.path];l&&(c=c||l.some(function(t){return r(t,u.pathname)&&o(t.methods,e.method)}));var f=!n.ext||Array.isArray(n.ext)?n.ext:[n.ext];f&&(c=c||f.some(function(e){return u.pathname.substr(-1*e.length)===e}));var d=!n.method||Array.isArray(n.method)?n.method:[n.method];if(d&&(c=c||!!~d.indexOf(e.method)),c)return s();t(e,a,s)}}},function(e,t){function n(e){this.message=e}function r(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,i,a=0,s=0,u="";i=t.charAt(s++);~i&&(r=a%4?64*r+i:i,a++%4)?u+=String.fromCharCode(255&r>>(-2*a&6)):0)i=o.indexOf(i);return u}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.name="InvalidCharacterError",e.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||r},function(e,t,n){function r(e){return decodeURIComponent(o(e).replace(/(.)/g,function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}var o=n(77);e.exports=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return r(t)}catch(e){return o(t)}}},function(e,t){function n(e,t){return null==e?void 0:e[t]}function r(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function o(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function i(){this.__data__=we?we(null):{}}function a(e){return this.has(e)&&delete this.__data__[e]}function s(e){var t=this.__data__;if(we){var n=t[e];return n===Y?void 0:n}return he.call(t,e)?t[e]:void 0}function u(e){var t=this.__data__;return we?void 0!==t[e]:he.call(t,e)}function c(e,t){return this.__data__[e]=we&&void 0===t?Y:t,this}function l(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function f(){this.__data__=[]}function d(e){var t=this.__data__,n=E(t,e);return!(n<0)&&(n==t.length-1?t.pop():ye.call(t,n,1),!0)}function p(e){var t=this.__data__,n=E(t,e);return n<0?void 0:t[n][1]}function h(e){return E(this.__data__,e)>-1}function g(e,t){var n=this.__data__,r=E(n,e);return r<0?n.push([e,t]):n[r][1]=t,this}function v(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function m(){this.__data__={hash:new o,map:new(_e||l),string:new o}}function y(e){return O(this,e).delete(e)}function _(e){return O(this,e).get(e)}function w(e){return O(this,e).has(e)}function x(e,t){return O(this,e).set(e,t),this}function b(e,t,n){var r=e[t];he.call(e,t)&&D(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function E(e,t){for(var n=e.length;n--;)if(D(e[n][0],t))return n;return-1}function I(e){return!(!L(e)||j(e))&&(F(e)||r(e)?ve:re).test(N(e))}function T(e,t,n,r){if(!L(e))return e;t=R(t,e)?[t]:k(t);for(var o=-1,i=t.length,a=i-1,s=e;null!=s&&++o<i;){var u=P(t[o]),c=n;if(o!=a){var l=s[u];c=r?r(l,u,s):void 0,void 0===c&&(c=L(l)?l:U(t[o+1])?[]:{})}b(s,u,c),s=s[u]}return e}function A(e){if("string"==typeof e)return e;if(H(e))return be?be.call(e):"";var t=e+"";return"0"==t&&1/e==-z?"-0":t}function k(e){return Ie(e)?e:Ee(e)}function O(e,t){var n=e.__data__;return C(t)?n["string"==typeof t?"string":"hash"]:n.map}function S(e,t){var r=n(e,t);return I(r)?r:void 0}function U(e,t){return!!(t=null==t?W:t)&&("number"==typeof e||oe.test(e))&&e>-1&&e%1==0&&e<t}function R(e,t){if(Ie(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!H(e))||(Q.test(e)||!J.test(e)||null!=t&&e in Object(t))}function C(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function j(e){return!!de&&de in e}function P(e){if("string"==typeof e||H(e))return e;var t=e+"";return"0"==t&&1/e==-z?"-0":t}function N(e){if(null!=e){try{return pe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function M(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(G);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a),a};return n.cache=new(M.Cache||v),n}function D(e,t){return e===t||e!==e&&t!==t}function F(e){var t=L(e)?ge.call(e):"";return t==$||t==K}function L(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function V(e){return!!e&&"object"==typeof e}function H(e){return"symbol"==typeof e||V(e)&&ge.call(e)==X}function q(e){return null==e?"":A(e)}function B(e,t,n){return null==e?e:T(e,t,n)}var G="Expected a function",Y="__lodash_hash_undefined__",z=1/0,W=9007199254740991,$="[object Function]",K="[object GeneratorFunction]",X="[object Symbol]",J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,Z=/^\./,ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,te=/[\\^$.*+?()[\]{}|]/g,ne=/\\(\\)?/g,re=/^\[object .+?Constructor\]$/,oe=/^(?:0|[1-9]\d*)$/,ie="object"==typeof global&&global&&global.Object===Object&&global,ae="object"==typeof self&&self&&self.Object===Object&&self,se=ie||ae||Function("return this")(),ue=Array.prototype,ce=Function.prototype,le=Object.prototype,fe=se["__core-js_shared__"],de=function(){var e=/[^.]+$/.exec(fe&&fe.keys&&fe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),pe=ce.toString,he=le.hasOwnProperty,ge=le.toString,ve=RegExp("^"+pe.call(he).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),me=se.Symbol,ye=ue.splice,_e=S(se,"Map"),we=S(Object,"create"),xe=me?me.prototype:void 0,be=xe?xe.toString:void 0;o.prototype.clear=i,o.prototype.delete=a,o.prototype.get=s,o.prototype.has=u,o.prototype.set=c,l.prototype.clear=f,l.prototype.delete=d,l.prototype.get=p,l.prototype.has=h,l.prototype.set=g,v.prototype.clear=m,v.prototype.delete=y,v.prototype.get=_,v.prototype.has=w,v.prototype.set=x;var Ee=M(function(e){e=q(e);var t=[];return Z.test(e)&&t.push(""),e.replace(ee,function(e,n,r,o){t.push(r?o.replace(ne,"$1"):n||e)}),t});M.Cache=v;var Ie=Array.isArray;e.exports=B},function(e,t,n){function r(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function o(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}var i=n(94);e.exports=i(r),e.exports.strict=i(o),r.proto=r(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return r(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})})},function(e,t){e.exports=require("async@2.1.2")},function(e,t){e.exports=require("body-parser@1.12.4")},function(e,t){e.exports=require("cookie-signature")},function(e,t){e.exports=require("crypto")},function(e,t){e.exports=require("ejs@2.3.1")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("jsonwebtoken@7.1.9")},function(e,t){e.exports=require("jwks-rsa@1.1.1")},function(e,t){e.exports=require("moment@2.11.2")},function(e,t){e.exports=require("morgan@1.5.3")},function(e,t){e.exports=require("uuid@2.0.1")},function(e,t){e.exports=require("webtask-tools")},function(e,t){e.exports=require("winston@1.0.0")},function(e,t){e.exports=require("wrappy")}]);